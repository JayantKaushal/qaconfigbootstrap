<?xml version="1.0" encoding="UTF-8"?><record_update table="wf_workflow_version">
    <wf_workflow_version action="INSERT_OR_UPDATE">
        <active>true</active>
        <activity_stages>{"ends":["804e1b9c67fd130005d1ff5557415a64"],"activities":{"084e1b9c67fd130005d1ff5557415a5f":"444e979c67fd130005d1ff5557415a96","444e1b9c67fd130005d1ff5557415a66":"c04e979c67fd130005d1ff5557415a96","cc4e1b9c67fd130005d1ff5557415a70":"c84e979c67fd130005d1ff5557415a95","0c4e1b9c67fd130005d1ff5557415a6f":"404e979c67fd130005d1ff5557415a96","484e1b9c67fd130005d1ff5557415a82":"cc4e979c67fd130005d1ff5557415a95","084e1b9c67fd130005d1ff5557415a72":"444e979c67fd130005d1ff5557415a96","4c4e1b9c67fd130005d1ff5557415a62":"c84e979c67fd130005d1ff5557415a96","884e1b9c67fd130005d1ff5557415a68":"484e979c67fd130005d1ff5557415a96"},"stages":{"c04e979c67fd130005d1ff5557415a96":{"name":"Request In Progress","value":"operation_in_progress","stageId":"c04e979c67fd130005d1ff5557415a96","order":1200,"duration":""},"c84e979c67fd130005d1ff5557415a95":{"name":"Waiting for Approval","value":"waiting_for_approval","stageId":"c84e979c67fd130005d1ff5557415a95","order":100,"duration":"1 Day"},"c84e979c67fd130005d1ff5557415a96":{"name":"Applying Approval Policy","value":"appling_approval_policy","stageId":"c84e979c67fd130005d1ff5557415a96","order":50,"duration":""},"cc4e979c67fd130005d1ff5557415a95":{"name":"Request Approved","value":"request_approved","stageId":"cc4e979c67fd130005d1ff5557415a95","order":90,"duration":""},"484e979c67fd130005d1ff5557415a96":{"name":"Request Completed","value":"operation_complete","stageId":"484e979c67fd130005d1ff5557415a96","order":1400,"duration":""},"404e979c67fd130005d1ff5557415a96":{"name":"Request Failed","value":"operation_failed","stageId":"404e979c67fd130005d1ff5557415a96","order":1300,"duration":""},"444e979c67fd130005d1ff5557415a96":{"name":"Check Permissions","value":"check_permissions","stageId":"444e979c67fd130005d1ff5557415a96","order":10,"duration":""}},"subflows":[]}</activity_stages>
        <after_business_rules>false</after_business_rules>
        <checked_out/>
        <checked_out_by/>
        <column_renderer display_value="Workflow-driven">a56213111b030100adca1e094f0713ac</column_renderer>
        <condition/>
        <condition_type/>
        <description/>
        <expected_sequences>0c4e1b9c67fd130005d1ff5557415a61,c84e1b9c67fd130005d1ff5557415a60,084e1b9c67fd130005d1ff5557415a72,084e1b9c67fd130005d1ff5557415a5f,c84e1b9c67fd130005d1ff5557415a69,0c4e1b9c67fd130005d1ff5557415a5c,4c4e1b9c67fd130005d1ff5557415a62,cc4e1b9c67fd130005d1ff5557415a70,0c4e1b9c67fd130005d1ff5557415a6d,484e1b9c67fd130005d1ff5557415a82,444e1b9c67fd130005d1ff5557415a66,844e1b9c67fd130005d1ff5557415a67,884e1b9c67fd130005d1ff5557415a68,cc4e1b9c67fd130005d1ff5557415a6a,c04e1b9c67fd130005d1ff5557415a6c,804e1b9c67fd130005d1ff5557415a64</expected_sequences>
        <expected_time>1970-01-01 14:00:00</expected_time>
        <expected_time_type/>
        <full_sequences>0c4e1b9c67fd130005d1ff5557415a61,c84e1b9c67fd130005d1ff5557415a60,084e1b9c67fd130005d1ff5557415a72,084e1b9c67fd130005d1ff5557415a5f,c84e1b9c67fd130005d1ff5557415a69,c84e979c67fd130005d1ff5557415a9b,0c4e1b9c67fd130005d1ff5557415a5c,4c4e1b9c67fd130005d1ff5557415a62,0c4e1b9c67fd130005d1ff5557415a6f,cc4e1b9c67fd130005d1ff5557415a70,484e1b9c67fd130005d1ff5557415a82,804e1b9c67fd130005d1ff5557415a64,0c4e1b9c67fd130005d1ff5557415a6d,444e1b9c67fd130005d1ff5557415a66,084e1b9c67fd130005d1ff5557415a5e,844e1b9c67fd130005d1ff5557415a67,884e1b9c67fd130005d1ff5557415a68,804e979c67fd130005d1ff5557415a97,404e1b9c67fd130005d1ff5557415a65,cc4e1b9c67fd130005d1ff5557415a6a,c04e1b9c67fd130005d1ff5557415a6c</full_sequences>
        <journal/>
        <max_activity_count>100</max_activity_count>
        <name>Cloud Resource Operation Request</name>
        <not_cacheable>false</not_cacheable>
        <on_cancel><![CDATA[// This script executes if the workflow is cancelled.// The global variable context_sys_id contains the sys_id of the cancelled workflow context.]]></on_cancel>
        <order>100</order>
        <pin_type>set_by_activity</pin_type>
        <published>true</published>
        <relative_duration display_value="2 business days by 4pm">3bf802c20a0a0b52008e2859cd8abcf2</relative_duration>
        <requires_ert>true</requires_ert>
        <run_multiple>false</run_multiple>
        <schedule/>
        <stage_field>stage</stage_field>
        <stage_order>computed</stage_order>
        <start display_value="Begin">0c4e1b9c67fd130005d1ff5557415a61</start>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>044e979c67fd130005d1ff5557415a94</sys_id>
        <sys_mod_count>5</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:05:04</sys_updated_on>
        <table>sc_req_item</table>
        <timezone/>
        <validated>false</validated>
        <workflow display_value="Cloud Resource Operation Request">c61355e3875032003273f4bbe3e3ec2d</workflow>
    </wf_workflow_version>
    <wf_workflow action="INSERT_OR_UPDATE">
        <access>public</access>
        <description/>
        <name>Cloud Resource Operation Request</name>
        <preview/>
        <sys_class_name>wf_workflow</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2017-01-19 19:20:10</sys_created_on>
        <sys_domain>global</sys_domain>
        <sys_domain_path>/</sys_domain_path>
        <sys_id>c61355e3875032003273f4bbe3e3ec2d</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>Cloud Resource Operation Request</sys_name>
        <sys_overrides/>
        <sys_package display_value="Cloud Management Platform" source="sn_cmp">80d50579eb203200979aa5115206fedd</sys_package>
        <sys_policy/>
        <sys_scope display_value="Cloud Management Platform">80d50579eb203200979aa5115206fedd</sys_scope>
        <sys_update_name>wf_workflow_c61355e3875032003273f4bbe3e3ec2d</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2017-01-19 19:20:10</sys_updated_on>
        <table>sc_req_item</table>
        <template>false</template>
        <vars/>
    </wf_workflow>
    <wf_stage action="INSERT_OR_UPDATE">
        <name>Applying Approval Policy</name>
        <ola>1970-01-01 00:00:00</ola>
        <order>50</order>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>c84e979c67fd130005d1ff5557415a96</sys_id>
        <sys_mod_count>1</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:05:01</sys_updated_on>
        <value>appling_approval_policy</value>
        <workflow_version display_value="Cloud Resource Operation Request">044e979c67fd130005d1ff5557415a94</workflow_version>
    </wf_stage>
    <wf_stage action="INSERT_OR_UPDATE">
        <name>Check Permissions</name>
        <ola>1970-01-01 00:00:00</ola>
        <order>10</order>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>444e979c67fd130005d1ff5557415a96</sys_id>
        <sys_mod_count>1</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:05:01</sys_updated_on>
        <value>check_permissions</value>
        <workflow_version display_value="Cloud Resource Operation Request">044e979c67fd130005d1ff5557415a94</workflow_version>
    </wf_stage>
    <wf_stage action="INSERT_OR_UPDATE">
        <name>Completed</name>
        <ola>1970-01-01 00:00:00</ola>
        <order>1100</order>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>4c4e979c67fd130005d1ff5557415a95</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>complete</value>
        <workflow_version display_value="Cloud Resource Operation Request">044e979c67fd130005d1ff5557415a94</workflow_version>
    </wf_stage>
    <wf_stage action="INSERT_OR_UPDATE">
        <name>Request Completed</name>
        <ola>1970-01-01 00:00:00</ola>
        <order>1400</order>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>484e979c67fd130005d1ff5557415a96</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>operation_complete</value>
        <workflow_version display_value="Cloud Resource Operation Request">044e979c67fd130005d1ff5557415a94</workflow_version>
    </wf_stage>
    <wf_stage action="INSERT_OR_UPDATE">
        <name>Request Failed</name>
        <ola>1970-01-01 00:00:00</ola>
        <order>1300</order>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>404e979c67fd130005d1ff5557415a96</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>operation_failed</value>
        <workflow_version display_value="Cloud Resource Operation Request">044e979c67fd130005d1ff5557415a94</workflow_version>
    </wf_stage>
    <wf_stage action="INSERT_OR_UPDATE">
        <name>Request In Progress</name>
        <ola>1970-01-01 00:00:00</ola>
        <order>1200</order>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>c04e979c67fd130005d1ff5557415a96</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>operation_in_progress</value>
        <workflow_version display_value="Cloud Resource Operation Request">044e979c67fd130005d1ff5557415a94</workflow_version>
    </wf_stage>
    <wf_stage action="INSERT_OR_UPDATE">
        <name>Request Cancelled</name>
        <ola>1970-01-01 00:00:00</ola>
        <order>1000</order>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>c44e979c67fd130005d1ff5557415a96</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>Request Cancelled</value>
        <workflow_version display_value="Cloud Resource Operation Request">044e979c67fd130005d1ff5557415a94</workflow_version>
    </wf_stage>
    <wf_stage action="INSERT_OR_UPDATE">
        <name>Request Approved</name>
        <ola>1970-01-01 00:00:00</ola>
        <order>90</order>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>cc4e979c67fd130005d1ff5557415a95</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>request_approved</value>
        <workflow_version display_value="Cloud Resource Operation Request">044e979c67fd130005d1ff5557415a94</workflow_version>
    </wf_stage>
    <wf_stage action="INSERT_OR_UPDATE">
        <name>Waiting for Approval</name>
        <ola>1970-01-02 00:00:00</ola>
        <order>100</order>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>c84e979c67fd130005d1ff5557415a95</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>waiting_for_approval</value>
        <workflow_version display_value="Cloud Resource Operation Request">044e979c67fd130005d1ff5557415a94</workflow_version>
    </wf_stage>
    <wf_activity action="INSERT_OR_UPDATE">
        <activity_definition display_value="Run Script">db8c65aec0a8016501d00259bc7203a4</activity_definition>
        <activity_definition_updated>false</activity_definition_updated>
        <databus_lookup_id>17</databus_lookup_id>
        <height/>
        <input>{}</input>
        <is_parent>false</is_parent>
        <name>Apply CatItemRequestEnd Policy</name>
        <new_activity_definition/>
        <notes/>
        <out_of_date>false</out_of_date>
        <parent/>
        <pinned>false</pinned>
        <pinned_version/>
        <stage/>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>cc4e1b9c67fd130005d1ff5557415a6a</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <timeout>1970-01-01 00:00:00</timeout>
        <vars/>
        <width/>
        <workflow_version display_value="Cloud Resource Operation Request">044e979c67fd130005d1ff5557415a94</workflow_version>
        <x>1229</x>
        <y>281</y>
    </wf_activity>
    <sys_variable_value action="delete_multiple" query="document_key=cc4e1b9c67fd130005d1ff5557415a6a"/>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>cc4e1b9c67fd130005d1ff5557415a6a</document_key>
        <order>1</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>404e1b9c67fd130005d1ff5557415a6b</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>activity.result = "failure";&#13;
&#13;
workflow.scratchpad.postWF = '';&#13;
var policyUtil = new sn_cmp.CloudPolicyUtil();&#13;
// Invoke workflow policy with moment as post-process&#13;
var object = policyUtil.invokePolicy(current, "", "catalogRequestEnd", current.variables.operationName + '', "", current.variables.resourceId + '');&#13;
&#13;
workflow.scratchpad.postoutput  = {};&#13;
	workflow.scratchpad.postoutput = new global.JSON().decode(object);&#13;
	&#13;
	&#13;
	if(!gs.nil(workflow.scratchpad.postoutput)) {&#13;
		&#13;
		if(workflow.scratchpad.postoutput.error)&#13;
			activity.result = "abort";&#13;
		&#13;
		else if(workflow.scratchpad.postoutput.abortProcess) {&#13;
			activity.result = 'abort';&#13;
			workflow.info("Aborting WF: " + workflow.scratchpad.postoutput.message);&#13;
			createCloudTrail('Apply Policy Rule Action', '2', false, 'Gracefully Aborting WF','' + workflow.scratchpad.postoutput.message);&#13;
		}&#13;
		&#13;
		else if(workflow.scratchpad.postoutput.successful) {&#13;
			workflow.scratchpad.postWF = policyUtil.getWorkflowName(workflow.scratchpad.postoutput.workflowId + '');&#13;
			if(workflow.scratchpad.postWF != ''){&#13;
				activity.result = "success";&#13;
				createCloudTrail('Apply Policy Rule Action', '2', false, 'Applying catalog request end policy','');&#13;
			}&#13;
		}&#13;
	}&#13;
	&#13;
	function createCloudTrail(step, messageType, milestone, messageSummary, messageDetails) {&#13;
		var catalogItemId = '' + current.cat_item;&#13;
		var requestItemId = '' + current.sys_id;&#13;
		var orderId ='';&#13;
		var contextKey = '';&#13;
		var stackId = '';&#13;
		if(workflow.scratchpad.resourceType == 'stack'){&#13;
			stackId = workflow.scratchpad.resource_id;&#13;
		}else{&#13;
			var gr = new GlideRecord('sn_cmp_stack_item');&#13;
			if(gr.get('ci_instance_id', workflow.scratchpad.resource_id)){&#13;
				stackId = gr.stack + '';&#13;
			}&#13;
		}&#13;
		var invocationTemplateId = '' + workflow.scratchpad.invocationTemplateId;&#13;
		var targetInstanceId = '' + workflow.scratchpad.resource_id;&#13;
		var userId = '' + current.request.requested_for;&#13;
		var groupId = '';&#13;
		var trailId = new AddCloudTrail().createTrailRecord(catalogItemId, requestItemId, orderId, contextKey, stackId, invocationTemplateId, targetInstanceId, messageType, milestone, messageDetails, messageSummary, step, userId, groupId);&#13;
	}</value>
        <variable display_value="">c35ddef20a0a0ba96248a7090eccd518</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>cc4e1b9c67fd130005d1ff5557415a6a</document_key>
        <order>1</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>404e1b9c67fd130005d1ff5557415a6b</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>activity.result = "failure";&#13;
&#13;
workflow.scratchpad.postWF = '';&#13;
var policyUtil = new sn_cmp.CloudPolicyUtil();&#13;
// Invoke workflow policy with moment as post-process&#13;
var object = policyUtil.invokePolicy(current, "", "catalogRequestEnd", current.variables.operationName + '', "", current.variables.resourceId + '');&#13;
&#13;
workflow.scratchpad.postoutput  = {};&#13;
	workflow.scratchpad.postoutput = new global.JSON().decode(object);&#13;
	&#13;
	&#13;
	if(!gs.nil(workflow.scratchpad.postoutput)) {&#13;
		&#13;
		if(workflow.scratchpad.postoutput.error)&#13;
			activity.result = "abort";&#13;
		&#13;
		else if(workflow.scratchpad.postoutput.abortProcess) {&#13;
			activity.result = 'abort';&#13;
			workflow.info("Aborting WF: " + workflow.scratchpad.postoutput.message);&#13;
			createCloudTrail('Apply Policy Rule Action', '2', false, 'Gracefully Aborting WF','' + workflow.scratchpad.postoutput.message);&#13;
		}&#13;
		&#13;
		else if(workflow.scratchpad.postoutput.successful) {&#13;
			workflow.scratchpad.postWF = policyUtil.getWorkflowName(workflow.scratchpad.postoutput.workflowId + '');&#13;
			if(workflow.scratchpad.postWF != ''){&#13;
				activity.result = "success";&#13;
				createCloudTrail('Apply Policy Rule Action', '2', false, 'Applying catalog request end policy','');&#13;
			}&#13;
		}&#13;
	}&#13;
	&#13;
	function createCloudTrail(step, messageType, milestone, messageSummary, messageDetails) {&#13;
		var catalogItemId = '' + current.cat_item;&#13;
		var requestItemId = '' + current.sys_id;&#13;
		var orderId ='';&#13;
		var contextKey = '';&#13;
		var stackId = '';&#13;
		if(workflow.scratchpad.resourceType == 'stack'){&#13;
			stackId = workflow.scratchpad.resource_id;&#13;
		}else{&#13;
			var gr = new GlideRecord('sn_cmp_stack_item');&#13;
			if(gr.get('ci_instance_id', workflow.scratchpad.resource_id)){&#13;
				stackId = gr.stack + '';&#13;
			}&#13;
		}&#13;
		var invocationTemplateId = '' + workflow.scratchpad.invocationTemplateId;&#13;
		var targetInstanceId = '' + workflow.scratchpad.resource_id;&#13;
		var userId = '' + current.request.requested_for;&#13;
		var groupId = '';&#13;
		var trailId = new AddCloudTrail().createTrailRecord(catalogItemId, requestItemId, orderId, contextKey, stackId, invocationTemplateId, targetInstanceId, messageType, milestone, messageDetails, messageSummary, step, userId, groupId);&#13;
	}</value>
        <variable display_value="">c35ddef20a0a0ba96248a7090eccd518</variable>
    </sys_variable_value>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="Apply CatItemRequestEnd Policy">cc4e1b9c67fd130005d1ff5557415a6a</activity>
        <condition>activity.result == 'abort'</condition>
        <condition_default/>
        <condition_type>standard</condition_type>
        <else_flag>false</else_flag>
        <error>false</error>
        <event>false</event>
        <event_name/>
        <is_positive>false</is_positive>
        <name>abort</name>
        <order>3</order>
        <short_description/>
        <skip_during_generate>false</skip_during_generate>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>484e1b9c67fd130005d1ff5557415a6b</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
    </wf_condition>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="Apply CatItemRequestEnd Policy">cc4e1b9c67fd130005d1ff5557415a6a</activity>
        <condition>activity.result == 'success'</condition>
        <condition_default/>
        <condition_type>standard</condition_type>
        <else_flag>false</else_flag>
        <error>false</error>
        <event>false</event>
        <event_name/>
        <is_positive>false</is_positive>
        <name>Apply post-processing</name>
        <order>1</order>
        <short_description/>
        <skip_during_generate>false</skip_during_generate>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>c84e1b9c67fd130005d1ff5557415a6b</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
    </wf_condition>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="Apply CatItemRequestEnd Policy">cc4e1b9c67fd130005d1ff5557415a6a</activity>
        <condition>true</condition>
        <condition_default/>
        <condition_type>else_flag</condition_type>
        <else_flag>true</else_flag>
        <error>false</error>
        <event>false</event>
        <event_name/>
        <is_positive>false</is_positive>
        <name>Skip</name>
        <order>3</order>
        <short_description/>
        <skip_during_generate>false</skip_during_generate>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>4c4e1b9c67fd130005d1ff5557415a6b</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
    </wf_condition>
    <wf_activity action="INSERT_OR_UPDATE">
        <activity_definition display_value="Run Script">db8c65aec0a8016501d00259bc7203a4</activity_definition>
        <activity_definition_updated>false</activity_definition_updated>
        <databus_lookup_id>14</databus_lookup_id>
        <height/>
        <input>{}</input>
        <is_parent>false</is_parent>
        <name>Apply CatItemRequestStart Policy</name>
        <new_activity_definition/>
        <notes/>
        <out_of_date>false</out_of_date>
        <parent/>
        <pinned>false</pinned>
        <pinned_version/>
        <stage/>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>c84e1b9c67fd130005d1ff5557415a69</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <timeout>1970-01-01 00:00:00</timeout>
        <vars/>
        <width/>
        <workflow_version display_value="Cloud Resource Operation Request">044e979c67fd130005d1ff5557415a94</workflow_version>
        <x>188</x>
        <y>235</y>
    </wf_activity>
    <sys_variable_value action="delete_multiple" query="document_key=c84e1b9c67fd130005d1ff5557415a69"/>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>c84e1b9c67fd130005d1ff5557415a69</document_key>
        <order>1</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>4c4e1b9c67fd130005d1ff5557415a69</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>workflow.scratchpad.resource_id = '' + current.variables.resourceId;&#13;
activity.result = "skip";&#13;
var cName = '';&#13;
var grCI = new GlideRecord('cmdb_ci');&#13;
if(!grCI.get(workflow.scratchpad.resource_id)){&#13;
	activity.result = 'abort';&#13;
	createCloudTrail('Invoke Pre-Process Workflow', '4', false, 'Exception: Resource Id is invalid/null', '');&#13;
}&#13;
else {&#13;
	// Set "Requested for" to the current assigned user&#13;
	// of the CI so that the assignment doesn't change&#13;
	var reqGr = new GlideRecord('sc_request');&#13;
	if (reqGr.get(current.request)) {&#13;
		reqGr.requested_for = grCI.assigned_to;&#13;
		reqGr.update();&#13;
		current.get(current.sys_id); // force current sc_req_item to refresh&#13;
	}&#13;
	&#13;
	cName = grCI.getRecordClassName();&#13;
	if(cName == 'sn_cmp_stack'){&#13;
		workflow.scratchpad.resourceType = "stack";&#13;
	}&#13;
	else{&#13;
		workflow.scratchpad.resourceType =  "stackResource";&#13;
	}&#13;
	&#13;
}&#13;
&#13;
workflow.scratchpad.invocationTemplateId = getInvocationTemplateId(cName);&#13;
&#13;
var policyUtil = new sn_cmp.CloudPolicyUtil();&#13;
// Invoke workflow policy&#13;
var object = policyUtil.invokePolicy(current, "", "catalogRequestStart", current.variables.operationName + '', "", current.variables.resourceId + '');&#13;
workflow.scratchpad.output  = {};&#13;
	workflow.scratchpad.output = new global.JSON().decode(object);&#13;
	&#13;
	if(workflow.scratchpad.output != null) {&#13;
		if(workflow.scratchpad.output.error){&#13;
			activity.result = "abort";&#13;
			createCloudTrail('Invoke Pre-Process Workflow', '4', true, 'Unexpected error from policy engine.', workflow.scratchpad.output.logs);&#13;
		}&#13;
		&#13;
		else if(workflow.scratchpad.output.abortProcess) {&#13;
			activity.result = "abort";&#13;
			workflow.info("Aborting WF: " + workflow.scratchpad.output.message);&#13;
			createCloudTrail('Invoke Pre-Process Workflow', '4', true, 'Gracefully Aborting Operation Request WF: ' + workflow.scratchpad.output.message, '');&#13;
		}&#13;
		&#13;
		else if(workflow.scratchpad.output.successful) {&#13;
			workflow.scratchpad.preWF = policyUtil.getWorkflowName(workflow.scratchpad.output.workflowId + '');&#13;
			if(workflow.scratchpad.preWF != ''){&#13;
				activity.result = "success";&#13;
				createCloudTrail('Invoke Pre-Process Workflow', '2', false, 'Applying catalog request start policy. Triggering pre-process WF.', workflow.scratchpad.output);&#13;
			}&#13;
		}&#13;
	}&#13;
	&#13;
	// payload information for pre/post-process WFs&#13;
	workflow.scratchpad.payload = {};&#13;
		workflow.scratchpad.payload.reqItem = '' + current.sys_id;&#13;
		workflow.scratchpad.payload.resourceType = '' + workflow.scratchpad.resourceType;&#13;
		workflow.scratchpad.payload.resource_id = '' + current.variables.resourceId;&#13;
		workflow.scratchpad.payload.operationName = '' + current.variables.operationName;&#13;
		workflow.scratchpad.payload.blueprint = '' + workflow.scratchpad.invocationTemplateId;&#13;
		&#13;
		function getInvocationTemplateId(className){&#13;
			if(className == 'sn_cmp_stack'){&#13;
				var gr = new GlideRecord('sn_cmp_stack');&#13;
				gr.get(workflow.scratchpad.resource_id);&#13;
				return '' + gr.blueprint;&#13;
			}else{&#13;
				var stackItem = new GlideRecord('sn_cmp_stack_item');&#13;
				if(stackItem.get('ci_instance_id', workflow.scratchpad.resource_id)){&#13;
					return '' + stackItem.stack.blueprint;&#13;
				}&#13;
			}&#13;
			return '';&#13;
		}&#13;
		&#13;
		function createCloudTrail(step, messageType, milestone, messageSummary, messageDetails) {&#13;
			var catalogItemId = '' + current.cat_item;&#13;
			var requestItemId = '' + current.sys_id;&#13;
			var orderId ='';&#13;
			var contextKey = '';&#13;
			var stackId = '';&#13;
			if(workflow.scratchpad.resourceType == 'stack'){&#13;
				stackId = workflow.scratchpad.resource_id;&#13;
			}else{&#13;
				var gr = new GlideRecord('sn_cmp_stack_item');&#13;
				if(gr.get('ci_instance_id', workflow.scratchpad.resource_id)){&#13;
					stackId = gr.stack + '';&#13;
				}&#13;
			}&#13;
			var invocationTemplateId = '' + workflow.scratchpad.invocationTemplateId;&#13;
			var targetInstanceId = '' + workflow.scratchpad.resource_id;&#13;
			var userId = '' + current.request.requested_for;&#13;
			var groupId = '';&#13;
			var trailId = new AddCloudTrail().createTrailRecord(catalogItemId, requestItemId, orderId, contextKey, stackId, invocationTemplateId, targetInstanceId, messageType, milestone, messageDetails, messageSummary, step, userId, groupId);&#13;
		}&#13;
		</value>
        <variable display_value="">c35ddef20a0a0ba96248a7090eccd518</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>c84e1b9c67fd130005d1ff5557415a69</document_key>
        <order>1</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>4c4e1b9c67fd130005d1ff5557415a69</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>workflow.scratchpad.resource_id = '' + current.variables.resourceId;&#13;
activity.result = "skip";&#13;
var cName = '';&#13;
var grCI = new GlideRecord('cmdb_ci');&#13;
if(!grCI.get(workflow.scratchpad.resource_id)){&#13;
	activity.result = 'abort';&#13;
	createCloudTrail('Invoke Pre-Process Workflow', '4', false, 'Exception: Resource Id is invalid/null', '');&#13;
}&#13;
else {&#13;
	// Set "Requested for" to the current assigned user&#13;
	// of the CI so that the assignment doesn't change&#13;
	var reqGr = new GlideRecord('sc_request');&#13;
	if (reqGr.get(current.request)) {&#13;
		reqGr.requested_for = grCI.assigned_to;&#13;
		reqGr.update();&#13;
		current.get(current.sys_id); // force current sc_req_item to refresh&#13;
	}&#13;
	&#13;
	cName = grCI.getRecordClassName();&#13;
	if(cName == 'sn_cmp_stack'){&#13;
		workflow.scratchpad.resourceType = "stack";&#13;
	}&#13;
	else{&#13;
		workflow.scratchpad.resourceType =  "stackResource";&#13;
	}&#13;
	&#13;
}&#13;
&#13;
workflow.scratchpad.invocationTemplateId = getInvocationTemplateId(cName);&#13;
&#13;
var policyUtil = new sn_cmp.CloudPolicyUtil();&#13;
// Invoke workflow policy&#13;
var object = policyUtil.invokePolicy(current, "", "catalogRequestStart", current.variables.operationName + '', "", current.variables.resourceId + '');&#13;
workflow.scratchpad.output  = {};&#13;
	workflow.scratchpad.output = new global.JSON().decode(object);&#13;
	&#13;
	if(workflow.scratchpad.output != null) {&#13;
		if(workflow.scratchpad.output.error){&#13;
			activity.result = "abort";&#13;
			createCloudTrail('Invoke Pre-Process Workflow', '4', true, 'Unexpected error from policy engine.', workflow.scratchpad.output.logs);&#13;
		}&#13;
		&#13;
		else if(workflow.scratchpad.output.abortProcess) {&#13;
			activity.result = "abort";&#13;
			workflow.info("Aborting WF: " + workflow.scratchpad.output.message);&#13;
			createCloudTrail('Invoke Pre-Process Workflow', '4', true, 'Gracefully Aborting Operation Request WF: ' + workflow.scratchpad.output.message, '');&#13;
		}&#13;
		&#13;
		else if(workflow.scratchpad.output.successful) {&#13;
			workflow.scratchpad.preWF = policyUtil.getWorkflowName(workflow.scratchpad.output.workflowId + '');&#13;
			if(workflow.scratchpad.preWF != ''){&#13;
				activity.result = "success";&#13;
				createCloudTrail('Invoke Pre-Process Workflow', '2', false, 'Applying catalog request start policy. Triggering pre-process WF.', workflow.scratchpad.output);&#13;
			}&#13;
		}&#13;
	}&#13;
	&#13;
	// payload information for pre/post-process WFs&#13;
	workflow.scratchpad.payload = {};&#13;
		workflow.scratchpad.payload.reqItem = '' + current.sys_id;&#13;
		workflow.scratchpad.payload.resourceType = '' + workflow.scratchpad.resourceType;&#13;
		workflow.scratchpad.payload.resource_id = '' + current.variables.resourceId;&#13;
		workflow.scratchpad.payload.operationName = '' + current.variables.operationName;&#13;
		workflow.scratchpad.payload.blueprint = '' + workflow.scratchpad.invocationTemplateId;&#13;
		&#13;
		function getInvocationTemplateId(className){&#13;
			if(className == 'sn_cmp_stack'){&#13;
				var gr = new GlideRecord('sn_cmp_stack');&#13;
				gr.get(workflow.scratchpad.resource_id);&#13;
				return '' + gr.blueprint;&#13;
			}else{&#13;
				var stackItem = new GlideRecord('sn_cmp_stack_item');&#13;
				if(stackItem.get('ci_instance_id', workflow.scratchpad.resource_id)){&#13;
					return '' + stackItem.stack.blueprint;&#13;
				}&#13;
			}&#13;
			return '';&#13;
		}&#13;
		&#13;
		function createCloudTrail(step, messageType, milestone, messageSummary, messageDetails) {&#13;
			var catalogItemId = '' + current.cat_item;&#13;
			var requestItemId = '' + current.sys_id;&#13;
			var orderId ='';&#13;
			var contextKey = '';&#13;
			var stackId = '';&#13;
			if(workflow.scratchpad.resourceType == 'stack'){&#13;
				stackId = workflow.scratchpad.resource_id;&#13;
			}else{&#13;
				var gr = new GlideRecord('sn_cmp_stack_item');&#13;
				if(gr.get('ci_instance_id', workflow.scratchpad.resource_id)){&#13;
					stackId = gr.stack + '';&#13;
				}&#13;
			}&#13;
			var invocationTemplateId = '' + workflow.scratchpad.invocationTemplateId;&#13;
			var targetInstanceId = '' + workflow.scratchpad.resource_id;&#13;
			var userId = '' + current.request.requested_for;&#13;
			var groupId = '';&#13;
			var trailId = new AddCloudTrail().createTrailRecord(catalogItemId, requestItemId, orderId, contextKey, stackId, invocationTemplateId, targetInstanceId, messageType, milestone, messageDetails, messageSummary, step, userId, groupId);&#13;
		}&#13;
		</value>
        <variable display_value="">c35ddef20a0a0ba96248a7090eccd518</variable>
    </sys_variable_value>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="Apply CatItemRequestStart Policy">c84e1b9c67fd130005d1ff5557415a69</activity>
        <condition>activity.result == 'abort'</condition>
        <condition_default/>
        <condition_type>standard</condition_type>
        <else_flag>false</else_flag>
        <error>false</error>
        <event>false</event>
        <event_name/>
        <is_positive>false</is_positive>
        <name>abort</name>
        <order>2</order>
        <short_description/>
        <skip_during_generate>false</skip_during_generate>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>c44e1b9c67fd130005d1ff5557415a6a</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
    </wf_condition>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="Apply CatItemRequestStart Policy">c84e1b9c67fd130005d1ff5557415a69</activity>
        <condition>activity.result == 'success'</condition>
        <condition_default/>
        <condition_type>standard</condition_type>
        <else_flag>false</else_flag>
        <error>false</error>
        <event>false</event>
        <event_name/>
        <is_positive>false</is_positive>
        <name>Apply pre-processing</name>
        <order>1</order>
        <short_description/>
        <skip_during_generate>false</skip_during_generate>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>484e1b9c67fd130005d1ff5557415a6a</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
    </wf_condition>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="Apply CatItemRequestStart Policy">c84e1b9c67fd130005d1ff5557415a69</activity>
        <condition/>
        <condition_default/>
        <condition_type>else_flag</condition_type>
        <else_flag>true</else_flag>
        <error>false</error>
        <event>false</event>
        <event_name/>
        <is_positive>false</is_positive>
        <name>Skip</name>
        <order>3</order>
        <short_description/>
        <skip_during_generate>false</skip_during_generate>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>444e1b9c67fd130005d1ff5557415a6a</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
    </wf_condition>
    <wf_activity action="INSERT_OR_UPDATE">
        <activity_definition display_value="Run Script">db8c65aec0a8016501d00259bc7203a4</activity_definition>
        <activity_definition_updated>false</activity_definition_updated>
        <databus_lookup_id>4</databus_lookup_id>
        <height/>
        <input>{}</input>
        <is_parent>false</is_parent>
        <name>Apply OperationApproval Policy</name>
        <new_activity_definition/>
        <notes/>
        <out_of_date>false</out_of_date>
        <parent/>
        <pinned>false</pinned>
        <pinned_version/>
        <stage display_value="Applying Approval Policy">c84e979c67fd130005d1ff5557415a96</stage>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>4c4e1b9c67fd130005d1ff5557415a62</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <timeout>1970-01-01 00:00:00</timeout>
        <vars/>
        <width/>
        <workflow_version display_value="Cloud Resource Operation Request">044e979c67fd130005d1ff5557415a94</workflow_version>
        <x>188</x>
        <y>383</y>
    </wf_activity>
    <sys_variable_value action="delete_multiple" query="document_key=4c4e1b9c67fd130005d1ff5557415a62"/>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>4c4e1b9c67fd130005d1ff5557415a62</document_key>
        <order>1</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>cc4e1b9c67fd130005d1ff5557415a62</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>activity.result = 'failure';&#13;
workflow.scratchpad.changeId = '';&#13;
var resourceId = workflow.scratchpad.resource_id;&#13;
&#13;
var nextFlow = '';&#13;
var isApprovalRequired = false;&#13;
var approvalType = '';&#13;
var changeType =  gs.getProperty('sn_cmp.cloud_change_type_for_nonapproval', 'standard');&#13;
&#13;
var grCI = new GlideRecord('cmdb_ci');&#13;
if(!grCI.get(resourceId)){&#13;
	activity.result = 'abort';&#13;
	createCloudTrail('Invoke Pre-Process Workflow', '4', false, 'Exception: Resource Id is invalid/null', '');&#13;
}&#13;
else {&#13;
	var cName = grCI.getRecordClassName();&#13;
	if(cName == 'sn_cmp_stack')&#13;
		approvalType = "stackApproval";&#13;
	else&#13;
		approvalType =  "stackResourceApproval";&#13;
	&#13;
	// Invoke workflow policy&#13;
	var policyUtil = new sn_cmp.CloudPolicyUtil();&#13;
&#13;
	var object = policyUtil.invokePolicy(current, "", approvalType, current.variables.operationName + '', "", current.variables.resourceId + '');&#13;
	createCloudTrail('Invoke Policy Engine', '1', false, 'Policy response payload', object);&#13;
	workflow.scratchpad.approvaloutput  = {};&#13;
		workflow.scratchpad.approvaloutput = new global.JSON().decode(object);&#13;
		&#13;
		if(!gs.nil(workflow.scratchpad.approvaloutput)) {&#13;
			if(workflow.scratchpad.approvaloutput.error){&#13;
				activity.result = 'abort';&#13;
				createCloudTrail('Apply Policy', '4', false, 'Unexpected error from policy engine.', new global.JSON().encode(workflow.scratchpad.approvaloutput));&#13;
			}&#13;
			&#13;
			if(workflow.scratchpad.approvaloutput.abortProcess) {&#13;
				activity.result = 'abort';&#13;
				createCloudTrail('Apply Policy', '4', true, 'Gracefully Aborting Blueprint Request WF: ' + workflow.scratchpad.approvaloutput.message, '');&#13;
			}&#13;
			&#13;
			if(workflow.scratchpad.approvaloutput.successful) {&#13;
				if(_isApprovalRequired()) {&#13;
					isApprovalRequired = true;&#13;
				}&#13;
			}&#13;
		}&#13;
		&#13;
		// If approval is required fetch WF name&#13;
		if(isApprovalRequired) {&#13;
			nextFlow = policyUtil.getWorkflowName(workflow.scratchpad.approvaloutput.workflowId + '');&#13;
			// If policy does not return approval WF then fall back to default WF&#13;
			if(nextFlow == '') {&#13;
				var grCI = getCIGR('cmdb_ci', resourceId);&#13;
				&#13;
				if(grCI != null) {&#13;
					nextFlow = new global.WorkflowChooser().chooseWorkflowForAction('operation_change', current);&#13;
					if (nextFlow == '') {&#13;
						workflow.info("Change workflow could not be found");&#13;
						createCloudTrail('Apply Policy', '4', true, 'Change workflow could not be found', '');&#13;
						activity.result = 'abort';&#13;
					}&#13;
					else&#13;
						activity.result = 'success';&#13;
				}&#13;
			}&#13;
			else&#13;
				activity.result = 'success';&#13;
			&#13;
			workflow.scratchpad.changeWf = nextFlow;&#13;
			createCloudTrail('Apply Policy', '2', true, 'Kicking off change approval WF', 'Kicking off ' + workflow.scratchpad.changeWf + ' WF');&#13;
		}&#13;
		else {&#13;
			//create change request record even if approval is not required&#13;
			var resourceName =  '';&#13;
			if(!gs.nil(current.variables.resourceId)){&#13;
				resourceName = current.configuration_item.name+'';&#13;
			}&#13;
			var cloudUtil = new sn_cmp.CloudChangeUtil();&#13;
			workflow.scratchpad.changeId = cloudUtil.createChange(current.sys_id, changeType, '', current.variables.operationName, resourceName, current.variables.resourceId);&#13;
		}&#13;
	}&#13;
	&#13;
	function _isApprovalRequired() {&#13;
		// Checks if change approval is needed.&#13;
		return (!gs.nil(workflow.scratchpad.approvaloutput.approval) &amp;&amp; workflow.scratchpad.approvaloutput.approval.groupApproval) || !gs.nil(workflow.scratchpad.approvaloutput.workflowId + '');&#13;
	}&#13;
	&#13;
	function getCIGR(base_table, sys_id) {&#13;
		// first query the base table, and bail out if we can't find it...&#13;
		var gr = new GlideRecord(base_table);&#13;
		if (!gr.get(sys_id)) {&#13;
			return null;&#13;
		}&#13;
		&#13;
		// now see what class this CI really is...&#13;
		var klass = gr.getRecordClassName();&#13;
		&#13;
		// if it's actually the base class, we're done...&#13;
		if (klass == base_table) {&#13;
			return gr;&#13;
		}&#13;
		&#13;
		// re-query, but now using the right table, and bail out if we can't find it...&#13;
		gr = new GlideRecord(klass);&#13;
		if (!gr.get(sys_id)) {&#13;
			return null;&#13;
		}&#13;
		// made it, so skedaddle with our results...&#13;
		return gr;&#13;
	}&#13;
	&#13;
		function createCloudTrail(step, messageType, milestone, messageSummary, messageDetails) {&#13;
			var catalogItemId = '' + current.cat_item;&#13;
			var requestItemId = '' + current.sys_id;&#13;
			var orderId ='';&#13;
			var contextKey = '';&#13;
			var stackId = '';&#13;
			if(workflow.scratchpad.resourceType == 'stack'){&#13;
				stackId = workflow.scratchpad.resource_id;&#13;
			}else{&#13;
				var gr = new GlideRecord('sn_cmp_stack_item');&#13;
				if(gr.get('ci_instance_id', workflow.scratchpad.resource_id)){&#13;
					stackId = gr.stack + '';&#13;
				}&#13;
			}&#13;
			var invocationTemplateId = '' + workflow.scratchpad.invocationTemplateId;&#13;
			var targetInstanceId = '' + workflow.scratchpad.resource_id;&#13;
			var userId = '' + current.request.requested_for;&#13;
			var groupId = '';&#13;
			var trailId = new AddCloudTrail().createTrailRecord(catalogItemId, requestItemId, orderId, contextKey, stackId, invocationTemplateId, targetInstanceId, messageType, milestone, messageDetails, messageSummary, step, userId, groupId);&#13;
		}</value>
        <variable display_value="">c35ddef20a0a0ba96248a7090eccd518</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>4c4e1b9c67fd130005d1ff5557415a62</document_key>
        <order>1</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>cc4e1b9c67fd130005d1ff5557415a62</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>activity.result = 'failure';&#13;
workflow.scratchpad.changeId = '';&#13;
var resourceId = workflow.scratchpad.resource_id;&#13;
&#13;
var nextFlow = '';&#13;
var isApprovalRequired = false;&#13;
var approvalType = '';&#13;
var changeType =  gs.getProperty('sn_cmp.cloud_change_type_for_nonapproval', 'standard');&#13;
&#13;
var grCI = new GlideRecord('cmdb_ci');&#13;
if(!grCI.get(resourceId)){&#13;
	activity.result = 'abort';&#13;
	createCloudTrail('Invoke Pre-Process Workflow', '4', false, 'Exception: Resource Id is invalid/null', '');&#13;
}&#13;
else {&#13;
	var cName = grCI.getRecordClassName();&#13;
	if(cName == 'sn_cmp_stack')&#13;
		approvalType = "stackApproval";&#13;
	else&#13;
		approvalType =  "stackResourceApproval";&#13;
	&#13;
	// Invoke workflow policy&#13;
	var policyUtil = new sn_cmp.CloudPolicyUtil();&#13;
&#13;
	var object = policyUtil.invokePolicy(current, "", approvalType, current.variables.operationName + '', "", current.variables.resourceId + '');&#13;
	createCloudTrail('Invoke Policy Engine', '1', false, 'Policy response payload', object);&#13;
	workflow.scratchpad.approvaloutput  = {};&#13;
		workflow.scratchpad.approvaloutput = new global.JSON().decode(object);&#13;
		&#13;
		if(!gs.nil(workflow.scratchpad.approvaloutput)) {&#13;
			if(workflow.scratchpad.approvaloutput.error){&#13;
				activity.result = 'abort';&#13;
				createCloudTrail('Apply Policy', '4', false, 'Unexpected error from policy engine.', new global.JSON().encode(workflow.scratchpad.approvaloutput));&#13;
			}&#13;
			&#13;
			if(workflow.scratchpad.approvaloutput.abortProcess) {&#13;
				activity.result = 'abort';&#13;
				createCloudTrail('Apply Policy', '4', true, 'Gracefully Aborting Blueprint Request WF: ' + workflow.scratchpad.approvaloutput.message, '');&#13;
			}&#13;
			&#13;
			if(workflow.scratchpad.approvaloutput.successful) {&#13;
				if(_isApprovalRequired()) {&#13;
					isApprovalRequired = true;&#13;
				}&#13;
			}&#13;
		}&#13;
		&#13;
		// If approval is required fetch WF name&#13;
		if(isApprovalRequired) {&#13;
			nextFlow = policyUtil.getWorkflowName(workflow.scratchpad.approvaloutput.workflowId + '');&#13;
			// If policy does not return approval WF then fall back to default WF&#13;
			if(nextFlow == '') {&#13;
				var grCI = getCIGR('cmdb_ci', resourceId);&#13;
				&#13;
				if(grCI != null) {&#13;
					nextFlow = new global.WorkflowChooser().chooseWorkflowForAction('operation_change', current);&#13;
					if (nextFlow == '') {&#13;
						workflow.info("Change workflow could not be found");&#13;
						createCloudTrail('Apply Policy', '4', true, 'Change workflow could not be found', '');&#13;
						activity.result = 'abort';&#13;
					}&#13;
					else&#13;
						activity.result = 'success';&#13;
				}&#13;
			}&#13;
			else&#13;
				activity.result = 'success';&#13;
			&#13;
			workflow.scratchpad.changeWf = nextFlow;&#13;
			createCloudTrail('Apply Policy', '2', true, 'Kicking off change approval WF', 'Kicking off ' + workflow.scratchpad.changeWf + ' WF');&#13;
		}&#13;
		else {&#13;
			//create change request record even if approval is not required&#13;
			var resourceName =  '';&#13;
			if(!gs.nil(current.variables.resourceId)){&#13;
				resourceName = current.configuration_item.name+'';&#13;
			}&#13;
			var cloudUtil = new sn_cmp.CloudChangeUtil();&#13;
			workflow.scratchpad.changeId = cloudUtil.createChange(current.sys_id, changeType, '', current.variables.operationName, resourceName, current.variables.resourceId);&#13;
		}&#13;
	}&#13;
	&#13;
	function _isApprovalRequired() {&#13;
		// Checks if change approval is needed.&#13;
		return (!gs.nil(workflow.scratchpad.approvaloutput.approval) &amp;&amp; workflow.scratchpad.approvaloutput.approval.groupApproval) || !gs.nil(workflow.scratchpad.approvaloutput.workflowId + '');&#13;
	}&#13;
	&#13;
	function getCIGR(base_table, sys_id) {&#13;
		// first query the base table, and bail out if we can't find it...&#13;
		var gr = new GlideRecord(base_table);&#13;
		if (!gr.get(sys_id)) {&#13;
			return null;&#13;
		}&#13;
		&#13;
		// now see what class this CI really is...&#13;
		var klass = gr.getRecordClassName();&#13;
		&#13;
		// if it's actually the base class, we're done...&#13;
		if (klass == base_table) {&#13;
			return gr;&#13;
		}&#13;
		&#13;
		// re-query, but now using the right table, and bail out if we can't find it...&#13;
		gr = new GlideRecord(klass);&#13;
		if (!gr.get(sys_id)) {&#13;
			return null;&#13;
		}&#13;
		// made it, so skedaddle with our results...&#13;
		return gr;&#13;
	}&#13;
	&#13;
		function createCloudTrail(step, messageType, milestone, messageSummary, messageDetails) {&#13;
			var catalogItemId = '' + current.cat_item;&#13;
			var requestItemId = '' + current.sys_id;&#13;
			var orderId ='';&#13;
			var contextKey = '';&#13;
			var stackId = '';&#13;
			if(workflow.scratchpad.resourceType == 'stack'){&#13;
				stackId = workflow.scratchpad.resource_id;&#13;
			}else{&#13;
				var gr = new GlideRecord('sn_cmp_stack_item');&#13;
				if(gr.get('ci_instance_id', workflow.scratchpad.resource_id)){&#13;
					stackId = gr.stack + '';&#13;
				}&#13;
			}&#13;
			var invocationTemplateId = '' + workflow.scratchpad.invocationTemplateId;&#13;
			var targetInstanceId = '' + workflow.scratchpad.resource_id;&#13;
			var userId = '' + current.request.requested_for;&#13;
			var groupId = '';&#13;
			var trailId = new AddCloudTrail().createTrailRecord(catalogItemId, requestItemId, orderId, contextKey, stackId, invocationTemplateId, targetInstanceId, messageType, milestone, messageDetails, messageSummary, step, userId, groupId);&#13;
		}</value>
        <variable display_value="">c35ddef20a0a0ba96248a7090eccd518</variable>
    </sys_variable_value>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="Apply OperationApproval Policy">4c4e1b9c67fd130005d1ff5557415a62</activity>
        <condition>activity.result == 'abort'</condition>
        <condition_default/>
        <condition_type>standard</condition_type>
        <else_flag>false</else_flag>
        <error>false</error>
        <event>false</event>
        <event_name/>
        <is_positive>false</is_positive>
        <name>abort</name>
        <order>2</order>
        <short_description/>
        <skip_during_generate>false</skip_during_generate>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>084e1b9c67fd130005d1ff5557415a63</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
    </wf_condition>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="Apply OperationApproval Policy">4c4e1b9c67fd130005d1ff5557415a62</activity>
        <condition/>
        <condition_default/>
        <condition_type>else_flag</condition_type>
        <else_flag>true</else_flag>
        <error>false</error>
        <event>false</event>
        <event_name/>
        <is_positive>false</is_positive>
        <name>skip</name>
        <order>3</order>
        <short_description/>
        <skip_during_generate>false</skip_during_generate>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>0c4e1b9c67fd130005d1ff5557415a63</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
    </wf_condition>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="Apply OperationApproval Policy">4c4e1b9c67fd130005d1ff5557415a62</activity>
        <condition>activity.result == 'success';</condition>
        <condition_default/>
        <condition_type>standard</condition_type>
        <else_flag>false</else_flag>
        <error>false</error>
        <event>false</event>
        <event_name/>
        <is_positive>false</is_positive>
        <name>Success</name>
        <order>1</order>
        <short_description/>
        <skip_during_generate>false</skip_during_generate>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>884e1b9c67fd130005d1ff5557415a63</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
    </wf_condition>
    <wf_activity action="INSERT_OR_UPDATE">
        <activity_definition display_value="Begin">c7a5e32c0a0a0b3a002377c24ed8ea76</activity_definition>
        <activity_definition_updated>false</activity_definition_updated>
        <databus_lookup_id>1</databus_lookup_id>
        <height/>
        <input/>
        <is_parent>false</is_parent>
        <name>Begin</name>
        <new_activity_definition/>
        <notes/>
        <out_of_date>false</out_of_date>
        <parent/>
        <pinned>false</pinned>
        <pinned_version/>
        <stage/>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>0c4e1b9c67fd130005d1ff5557415a61</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <timeout>1970-01-01 00:00:00</timeout>
        <vars/>
        <width>80</width>
        <workflow_version display_value="Cloud Resource Operation Request">044e979c67fd130005d1ff5557415a94</workflow_version>
        <x>7</x>
        <y>0</y>
    </wf_activity>
    <sys_variable_value action="delete_multiple" query="document_key=0c4e1b9c67fd130005d1ff5557415a61"/>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="Begin">0c4e1b9c67fd130005d1ff5557415a61</activity>
        <condition>true</condition>
        <condition_default/>
        <condition_type>standard</condition_type>
        <else_flag>false</else_flag>
        <error>false</error>
        <event>false</event>
        <event_name/>
        <is_positive>true</is_positive>
        <name>Always</name>
        <order>0</order>
        <short_description/>
        <skip_during_generate>false</skip_during_generate>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>c44e1b9c67fd130005d1ff5557415a62</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
    </wf_condition>
    <wf_activity action="INSERT_OR_UPDATE">
        <activity_definition display_value="Run Script">db8c65aec0a8016501d00259bc7203a4</activity_definition>
        <activity_definition_updated>false</activity_definition_updated>
        <databus_lookup_id>11</databus_lookup_id>
        <height/>
        <input>{}</input>
        <is_parent>false</is_parent>
        <name>Change Approved</name>
        <new_activity_definition/>
        <notes/>
        <out_of_date>false</out_of_date>
        <parent/>
        <pinned>false</pinned>
        <pinned_version/>
        <stage display_value="Request Approved">cc4e979c67fd130005d1ff5557415a95</stage>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>484e1b9c67fd130005d1ff5557415a82</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <timeout>1970-01-01 00:00:00</timeout>
        <vars/>
        <width/>
        <workflow_version display_value="Cloud Resource Operation Request">044e979c67fd130005d1ff5557415a94</workflow_version>
        <x>418</x>
        <y>153</y>
    </wf_activity>
    <sys_variable_value action="delete_multiple" query="document_key=484e1b9c67fd130005d1ff5557415a82"/>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>484e1b9c67fd130005d1ff5557415a82</document_key>
        <order>1</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>c84e1b9c67fd130005d1ff5557415a82</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>activity.result = 'approved';&#13;
var tempCurrent = current; // somehow current is being changed in the next call.&#13;
&#13;
var changeGr = new GlideRecord('change_request');&#13;
if(changeGr.get(workflow.scratchpad.changeId + '')) {&#13;
	var changeRequest = new global.ChangeRequest(changeGr);&#13;
	&#13;
	/*	changeRequest.implement();&#13;
		changeRequest.review();*/&#13;
		changeRequest.setImplement();&#13;
		changeRequest.update();&#13;
		changeRequest.setReview();&#13;
		changeRequest.update();&#13;
}&#13;
&#13;
current = tempCurrent;</value>
        <variable display_value="">c35ddef20a0a0ba96248a7090eccd518</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>484e1b9c67fd130005d1ff5557415a82</document_key>
        <order>1</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>c84e1b9c67fd130005d1ff5557415a82</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>activity.result = 'approved';&#13;
var tempCurrent = current; // somehow current is being changed in the next call.&#13;
&#13;
var changeGr = new GlideRecord('change_request');&#13;
if(changeGr.get(workflow.scratchpad.changeId + '')) {&#13;
	var changeRequest = new global.ChangeRequest(changeGr);&#13;
	&#13;
	/*	changeRequest.implement();&#13;
		changeRequest.review();*/&#13;
		changeRequest.setImplement();&#13;
		changeRequest.update();&#13;
		changeRequest.setReview();&#13;
		changeRequest.update();&#13;
}&#13;
&#13;
current = tempCurrent;</value>
        <variable display_value="">c35ddef20a0a0ba96248a7090eccd518</variable>
    </sys_variable_value>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="Change Approved">484e1b9c67fd130005d1ff5557415a82</activity>
        <condition>activity.result == 'approved' &amp;&amp; activity.state != 'faulted'</condition>
        <condition_default/>
        <condition_type>standard</condition_type>
        <else_flag>false</else_flag>
        <error>false</error>
        <event>false</event>
        <event_name/>
        <is_positive>true</is_positive>
        <name>approved</name>
        <order>1</order>
        <short_description/>
        <skip_during_generate>false</skip_during_generate>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>044e1b9c67fd130005d1ff5557415a83</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
    </wf_condition>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="Change Approved">484e1b9c67fd130005d1ff5557415a82</activity>
        <condition>activity.state == 'faulted'</condition>
        <condition_default/>
        <condition_type>else_flag</condition_type>
        <else_flag>true</else_flag>
        <error>false</error>
        <event>false</event>
        <event_name/>
        <is_positive>false</is_positive>
        <name>Else</name>
        <order>3</order>
        <short_description/>
        <skip_during_generate>false</skip_during_generate>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>844e1b9c67fd130005d1ff5557415a83</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
    </wf_condition>
    <wf_activity action="INSERT_OR_UPDATE">
        <activity_definition display_value="Run Script">db8c65aec0a8016501d00259bc7203a4</activity_definition>
        <activity_definition_updated>false</activity_definition_updated>
        <databus_lookup_id>12</databus_lookup_id>
        <height/>
        <input>{}</input>
        <is_parent>false</is_parent>
        <name>Change Rejected/Cancelled</name>
        <new_activity_definition/>
        <notes/>
        <out_of_date>false</out_of_date>
        <parent/>
        <pinned>false</pinned>
        <pinned_version/>
        <stage/>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>084e1b9c67fd130005d1ff5557415a5e</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <timeout>1970-01-01 00:00:00</timeout>
        <vars/>
        <width/>
        <workflow_version display_value="Cloud Resource Operation Request">044e979c67fd130005d1ff5557415a94</workflow_version>
        <x>420</x>
        <y>273</y>
    </wf_activity>
    <sys_variable_value action="delete_multiple" query="document_key=084e1b9c67fd130005d1ff5557415a5e"/>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>084e1b9c67fd130005d1ff5557415a5e</document_key>
        <order>1</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>884e1b9c67fd130005d1ff5557415a5e</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>var changeGr = new GlideRecord('change_request');&#13;
if(changeGr.get(workflow.scratchpad.changeId + '')) {&#13;
	var changeRequest = new global.ChangeRequest(changeGr);&#13;
	//changeRequest.cancel();&#13;
	changeRequest.setCancel();&#13;
	changeRequest.update();&#13;
}</value>
        <variable display_value="">c35ddef20a0a0ba96248a7090eccd518</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>084e1b9c67fd130005d1ff5557415a5e</document_key>
        <order>1</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>884e1b9c67fd130005d1ff5557415a5e</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>var changeGr = new GlideRecord('change_request');&#13;
if(changeGr.get(workflow.scratchpad.changeId + '')) {&#13;
	var changeRequest = new global.ChangeRequest(changeGr);&#13;
	//changeRequest.cancel();&#13;
	changeRequest.setCancel();&#13;
	changeRequest.update();&#13;
}</value>
        <variable display_value="">c35ddef20a0a0ba96248a7090eccd518</variable>
    </sys_variable_value>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="Change Rejected/Cancelled">084e1b9c67fd130005d1ff5557415a5e</activity>
        <condition>true</condition>
        <condition_default/>
        <condition_type>standard</condition_type>
        <else_flag>false</else_flag>
        <error>false</error>
        <event>false</event>
        <event_name/>
        <is_positive>true</is_positive>
        <name>Always</name>
        <order>0</order>
        <short_description/>
        <skip_during_generate>false</skip_during_generate>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>804e1b9c67fd130005d1ff5557415a5f</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
    </wf_condition>
    <wf_activity action="INSERT_OR_UPDATE">
        <activity_definition display_value="Run Script">db8c65aec0a8016501d00259bc7203a4</activity_definition>
        <activity_definition_updated>false</activity_definition_updated>
        <databus_lookup_id>20</databus_lookup_id>
        <height/>
        <input>{}</input>
        <is_parent>false</is_parent>
        <name>Check Permission</name>
        <new_activity_definition/>
        <notes/>
        <out_of_date>false</out_of_date>
        <parent/>
        <pinned>false</pinned>
        <pinned_version/>
        <stage display_value="Check Permissions">444e979c67fd130005d1ff5557415a96</stage>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>084e1b9c67fd130005d1ff5557415a5f</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <timeout>1970-01-01 00:00:00</timeout>
        <vars/>
        <width/>
        <workflow_version display_value="Cloud Resource Operation Request">044e979c67fd130005d1ff5557415a94</workflow_version>
        <x>187</x>
        <y>124</y>
    </wf_activity>
    <sys_variable_value action="delete_multiple" query="document_key=084e1b9c67fd130005d1ff5557415a5f"/>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>084e1b9c67fd130005d1ff5557415a5f</document_key>
        <order>1</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>884e1b9c67fd130005d1ff5557415a5f</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>activity.result = 'failure';&#13;
&#13;
/**** Initialize Data ****/&#13;
// Set order submission count to 1 and increase it every time the same order is resubmitted&#13;
// Set error flags &#13;
/*workflow.scratchpad.afterBPOErrorFlag = false;&#13;
&#13;
workflow.scratchpad.afterBPOSubmitCount = 1;*/&#13;
workflow.scratchpad.submitCount = 1;&#13;
&#13;
workflow.scratchpad.taskErrorMessage = '';&#13;
workflow.scratchpad.orderId = '';&#13;
workflow.scratchpad.operatorFlag = false;&#13;
current.variables.cloudTaskWorkflowInput = {};&#13;
// Set WF name for Task processing here&#13;
workflow.scratchpad.taskWFName = new global.WorkflowChooser().chooseWorkflowForAction('cloud_task_processing', current);&#13;
&#13;
&#13;
/**** Initialize Data Ends ****/&#13;
&#13;
var resourceGr = new GlideRecord("cmdb_ci");&#13;
if (resourceGr.get(current.variables.resourceId)) {&#13;
	&#13;
	var cName = resourceGr.getRecordClassName();&#13;
	if(cName == 'sn_cmp_stack'){&#13;
		workflow.scratchpad.resourceType = "stack";&#13;
	}&#13;
	else{&#13;
		workflow.scratchpad.resourceType =  "stackResource";&#13;
	}&#13;
	&#13;
	var user = gs.getUser();&#13;
	activity.result = (user.hasRole("sn_cmp.cmp_root_admin")&#13;
		|| user.getID().equals(resourceGr.getValue("assigned_to"))&#13;
		|| user.isMemberOf(resourceGr.getValue("assignment_group")))? 'success' : 'failure';&#13;
	if (activity.result == 'failure') {&#13;
		var msg = 'User ' + gs.getUserName() + ' does not have permission for operation ' + current.variables.operationName + ' on ' + resourceGr.name;&#13;
		createCloudTrail('Check User Permissions', 4, true, msg, msg);&#13;
	}&#13;
} else {&#13;
	createCloudTrail('Invoke Pre-Process Workflow', '4', false, 'Exception: Resource Id is invalid/null', '');&#13;
}&#13;
&#13;
function createCloudTrail(step, messageType, milestone, messageSummary,        messageDetails) {&#13;
	var catalogItemId = '' + current.cat_item;&#13;
	var requestItemId = '' + current.sys_id;&#13;
	var orderId ='';&#13;
	var contextKey = '';&#13;
	var stackId = '';&#13;
	if(workflow.scratchpad.resourceType == 'stack'){&#13;
		stackId = current.variables.resourceId;&#13;
	}else{&#13;
		var gr = new GlideRecord('sn_cmp_stack_item');&#13;
		if(gr.get('ci_instance_id', current.variables.resourceId)){&#13;
			stackId = gr.stack + '';&#13;
		}&#13;
	}&#13;
	var invocationTemplateId = '' + workflow.scratchpad.invocationTemplateId;&#13;
	var targetInstanceId = '' + current.variables.resourceId;&#13;
	var userId = '' + current.request.requested_for;&#13;
	var groupId = '';&#13;
	var trailId = new AddCloudTrail().createTrailRecord(catalogItemId, requestItemId, orderId, contextKey, stackId, invocationTemplateId, targetInstanceId, messageType, milestone, messageDetails, messageSummary, step, userId, groupId);&#13;
}</value>
        <variable display_value="">c35ddef20a0a0ba96248a7090eccd518</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>084e1b9c67fd130005d1ff5557415a5f</document_key>
        <order>1</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>884e1b9c67fd130005d1ff5557415a5f</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>activity.result = 'failure';&#13;
&#13;
/**** Initialize Data ****/&#13;
// Set order submission count to 1 and increase it every time the same order is resubmitted&#13;
// Set error flags &#13;
/*workflow.scratchpad.afterBPOErrorFlag = false;&#13;
&#13;
workflow.scratchpad.afterBPOSubmitCount = 1;*/&#13;
workflow.scratchpad.submitCount = 1;&#13;
&#13;
workflow.scratchpad.taskErrorMessage = '';&#13;
workflow.scratchpad.orderId = '';&#13;
workflow.scratchpad.operatorFlag = false;&#13;
current.variables.cloudTaskWorkflowInput = {};&#13;
// Set WF name for Task processing here&#13;
workflow.scratchpad.taskWFName = new global.WorkflowChooser().chooseWorkflowForAction('cloud_task_processing', current);&#13;
&#13;
&#13;
/**** Initialize Data Ends ****/&#13;
&#13;
var resourceGr = new GlideRecord("cmdb_ci");&#13;
if (resourceGr.get(current.variables.resourceId)) {&#13;
	&#13;
	var cName = resourceGr.getRecordClassName();&#13;
	if(cName == 'sn_cmp_stack'){&#13;
		workflow.scratchpad.resourceType = "stack";&#13;
	}&#13;
	else{&#13;
		workflow.scratchpad.resourceType =  "stackResource";&#13;
	}&#13;
	&#13;
	var user = gs.getUser();&#13;
	activity.result = (user.hasRole("sn_cmp.cmp_root_admin")&#13;
		|| user.getID().equals(resourceGr.getValue("assigned_to"))&#13;
		|| user.isMemberOf(resourceGr.getValue("assignment_group")))? 'success' : 'failure';&#13;
	if (activity.result == 'failure') {&#13;
		var msg = 'User ' + gs.getUserName() + ' does not have permission for operation ' + current.variables.operationName + ' on ' + resourceGr.name;&#13;
		createCloudTrail('Check User Permissions', 4, true, msg, msg);&#13;
	}&#13;
} else {&#13;
	createCloudTrail('Invoke Pre-Process Workflow', '4', false, 'Exception: Resource Id is invalid/null', '');&#13;
}&#13;
&#13;
function createCloudTrail(step, messageType, milestone, messageSummary,        messageDetails) {&#13;
	var catalogItemId = '' + current.cat_item;&#13;
	var requestItemId = '' + current.sys_id;&#13;
	var orderId ='';&#13;
	var contextKey = '';&#13;
	var stackId = '';&#13;
	if(workflow.scratchpad.resourceType == 'stack'){&#13;
		stackId = current.variables.resourceId;&#13;
	}else{&#13;
		var gr = new GlideRecord('sn_cmp_stack_item');&#13;
		if(gr.get('ci_instance_id', current.variables.resourceId)){&#13;
			stackId = gr.stack + '';&#13;
		}&#13;
	}&#13;
	var invocationTemplateId = '' + workflow.scratchpad.invocationTemplateId;&#13;
	var targetInstanceId = '' + current.variables.resourceId;&#13;
	var userId = '' + current.request.requested_for;&#13;
	var groupId = '';&#13;
	var trailId = new AddCloudTrail().createTrailRecord(catalogItemId, requestItemId, orderId, contextKey, stackId, invocationTemplateId, targetInstanceId, messageType, milestone, messageDetails, messageSummary, step, userId, groupId);&#13;
}</value>
        <variable display_value="">c35ddef20a0a0ba96248a7090eccd518</variable>
    </sys_variable_value>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="Check Permission">084e1b9c67fd130005d1ff5557415a5f</activity>
        <condition/>
        <condition_default/>
        <condition_type>else_flag</condition_type>
        <else_flag>true</else_flag>
        <error>false</error>
        <event>false</event>
        <event_name/>
        <is_positive>false</is_positive>
        <name>Failure</name>
        <order>2</order>
        <short_description/>
        <skip_during_generate>false</skip_during_generate>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>444e1b9c67fd130005d1ff5557415a60</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
    </wf_condition>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="Check Permission">084e1b9c67fd130005d1ff5557415a5f</activity>
        <condition>activity.result == 'success';</condition>
        <condition_default/>
        <condition_type>standard</condition_type>
        <else_flag>false</else_flag>
        <error>false</error>
        <event>false</event>
        <event_name/>
        <is_positive>false</is_positive>
        <name>Success</name>
        <order>1</order>
        <short_description/>
        <skip_during_generate>false</skip_during_generate>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>c04e1b9c67fd130005d1ff5557415a60</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
    </wf_condition>
    <wf_activity action="INSERT_OR_UPDATE">
        <activity_definition display_value="End">c7a66f7d0a0a0b3a004544a6d2f14076</activity_definition>
        <activity_definition_updated>false</activity_definition_updated>
        <databus_lookup_id>2</databus_lookup_id>
        <height/>
        <input/>
        <is_parent>false</is_parent>
        <name>End</name>
        <new_activity_definition/>
        <notes/>
        <out_of_date>false</out_of_date>
        <parent/>
        <pinned>false</pinned>
        <pinned_version/>
        <stage/>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>804e1b9c67fd130005d1ff5557415a64</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <timeout>1970-01-01 00:00:00</timeout>
        <vars/>
        <width>80</width>
        <workflow_version display_value="Cloud Resource Operation Request">044e979c67fd130005d1ff5557415a94</workflow_version>
        <x>1329</x>
        <y>687</y>
    </wf_activity>
    <sys_variable_value action="delete_multiple" query="document_key=804e1b9c67fd130005d1ff5557415a64"/>
    <wf_activity action="INSERT_OR_UPDATE">
        <activity_definition display_value="Run Script">db8c65aec0a8016501d00259bc7203a4</activity_definition>
        <activity_definition_updated>false</activity_definition_updated>
        <databus_lookup_id>16</databus_lookup_id>
        <height/>
        <input>{}</input>
        <is_parent>false</is_parent>
        <name>Handle error</name>
        <new_activity_definition/>
        <notes/>
        <out_of_date>false</out_of_date>
        <parent/>
        <pinned>false</pinned>
        <pinned_version/>
        <stage display_value="Request Failed">404e979c67fd130005d1ff5557415a96</stage>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>0c4e1b9c67fd130005d1ff5557415a6f</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <timeout>1970-01-01 00:00:00</timeout>
        <vars/>
        <width/>
        <workflow_version display_value="Cloud Resource Operation Request">044e979c67fd130005d1ff5557415a94</workflow_version>
        <x>782</x>
        <y>687</y>
    </wf_activity>
    <sys_variable_value action="delete_multiple" query="document_key=0c4e1b9c67fd130005d1ff5557415a6f"/>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>0c4e1b9c67fd130005d1ff5557415a6f</document_key>
        <order>1</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>8c4e1b9c67fd130005d1ff5557415a6f</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>current.setValue('state','4'); //Closed Incomplete</value>
        <variable display_value="">c35ddef20a0a0ba96248a7090eccd518</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>0c4e1b9c67fd130005d1ff5557415a6f</document_key>
        <order>1</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>8c4e1b9c67fd130005d1ff5557415a6f</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>current.setValue('state','4'); //Closed Incomplete</value>
        <variable display_value="">c35ddef20a0a0ba96248a7090eccd518</variable>
    </sys_variable_value>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="Handle error">0c4e1b9c67fd130005d1ff5557415a6f</activity>
        <condition/>
        <condition_default/>
        <condition_type>else_flag</condition_type>
        <else_flag>true</else_flag>
        <error>false</error>
        <event>false</event>
        <event_name/>
        <is_positive>false</is_positive>
        <name>else</name>
        <order>1</order>
        <short_description/>
        <skip_during_generate>false</skip_during_generate>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>484e1b9c67fd130005d1ff5557415a70</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
    </wf_condition>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="Handle error">0c4e1b9c67fd130005d1ff5557415a6f</activity>
        <condition>workflow.scratchpad.status=='failed'</condition>
        <condition_default/>
        <condition_type>error</condition_type>
        <else_flag>false</else_flag>
        <error>true</error>
        <event>false</event>
        <event_name/>
        <is_positive>false</is_positive>
        <name>Error</name>
        <order>0</order>
        <short_description/>
        <skip_during_generate>false</skip_during_generate>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>c44e1b9c67fd130005d1ff5557415a70</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
    </wf_condition>
    <wf_activity action="INSERT_OR_UPDATE">
        <activity_definition display_value="If">98f621ca0a0a0b5900f7c291f5e45a0e</activity_definition>
        <activity_definition_updated>false</activity_definition_updated>
        <databus_lookup_id>10</databus_lookup_id>
        <height/>
        <input>{}</input>
        <is_parent>false</is_parent>
        <name>Is change approved?</name>
        <new_activity_definition/>
        <notes/>
        <out_of_date>false</out_of_date>
        <parent/>
        <pinned>false</pinned>
        <pinned_version/>
        <stage/>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>0c4e1b9c67fd130005d1ff5557415a6d</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <timeout>1970-01-01 00:00:00</timeout>
        <vars/>
        <width/>
        <workflow_version display_value="Cloud Resource Operation Request">044e979c67fd130005d1ff5557415a94</workflow_version>
        <x>187</x>
        <y>622</y>
    </wf_activity>
    <sys_variable_value action="delete_multiple" query="document_key=0c4e1b9c67fd130005d1ff5557415a6d"/>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>0c4e1b9c67fd130005d1ff5557415a6d</document_key>
        <order>100</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>004e1b9c67fd130005d1ff5557415a6e</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value/>
        <variable display_value="">493cba6a0a6a803f07df24b118473551</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>0c4e1b9c67fd130005d1ff5557415a6d</document_key>
        <order>300</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>844e1b9c67fd130005d1ff5557415a6e</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>// This script needs to set answer to 'yes' or 'no' to indicate the state of the activity.&#13;
//&#13;
// For example,&#13;
//&#13;
//   answer = ifScript();&#13;
//&#13;
//   function ifScript() {&#13;
	//      if (condition is true) {&#13;
		//         return 'yes';&#13;
		//      }&#13;
		//      return 'no';&#13;
		//   }&#13;
		&#13;
		answer = ifScript();&#13;
		&#13;
		function ifScript() {&#13;
			var result =  {};&#13;
				if(gs.nil(workflow.scratchpad.change_result))&#13;
					return 'error';&#13;
				result = workflow.scratchpad.change_result;&#13;
				// Log change wf response in cloud trail&#13;
				//	Apply Policy Rule Action&#13;
				createCloudTrail('Apply Policy Rule Action', '2', true, 'Change Approval result: ' + result.changeStatus, new global.JSON().encode(result));&#13;
				if(result.error)&#13;
					return 'error';&#13;
				workflow.scratchpad.changeId = result.changeId + '';&#13;
				if(result.isChangeApprovalRequired) {&#13;
					var changeStatus = result.changeStatus;&#13;
					if(changeStatus == 'approved')&#13;
						return 'yes';&#13;
					else if(changeStatus == 'cancelled')&#13;
						return 'cancelled';&#13;
					else&#13;
						return 'no';&#13;
				}&#13;
				return 'yes';&#13;
			}&#13;
			&#13;
			function createCloudTrail(step, messageType, milestone, messageSummary, messageDetails) {&#13;
				var catalogItemId = '' + current.cat_item;&#13;
				var requestItemId = '' + current.sys_id;&#13;
				var orderId ='';&#13;
				var contextKey = '';&#13;
				var stackId = '';&#13;
				if(workflow.scratchpad.resourceType == 'stack'){&#13;
					stackId = workflow.scratchpad.resource_id;&#13;
				}else{&#13;
					var gr = new GlideRecord('sn_cmp_stack_item');&#13;
					if(gr.get('ci_instance_id', workflow.scratchpad.resource_id)){&#13;
						stackId = gr.stack + '';&#13;
					}&#13;
				}&#13;
				var invocationTemplateId = '' + workflow.scratchpad.invocationTemplateId;&#13;
				var targetInstanceId = '' + workflow.scratchpad.resource_id;&#13;
				var userId = '' + current.request.requested_for;&#13;
				var groupId = '';&#13;
				var trailId = new AddCloudTrail().createTrailRecord(catalogItemId, requestItemId, orderId, contextKey, stackId, invocationTemplateId, targetInstanceId, messageType, milestone, messageDetails, messageSummary, step, userId, groupId);&#13;
			}</value>
        <variable display_value="">c35e50810a0a0ba96248a709b450fc32</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>0c4e1b9c67fd130005d1ff5557415a6d</document_key>
        <order>200</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>c04e1b9c67fd130005d1ff5557415a6e</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>1</value>
        <variable display_value="">493d2c1d0a6a803f3217a75738ea3289</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>0c4e1b9c67fd130005d1ff5557415a6d</document_key>
        <order>100</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>004e1b9c67fd130005d1ff5557415a6e</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value/>
        <variable display_value="">493cba6a0a6a803f07df24b118473551</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>0c4e1b9c67fd130005d1ff5557415a6d</document_key>
        <order>200</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>c04e1b9c67fd130005d1ff5557415a6e</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>1</value>
        <variable display_value="">493d2c1d0a6a803f3217a75738ea3289</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>0c4e1b9c67fd130005d1ff5557415a6d</document_key>
        <order>300</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>844e1b9c67fd130005d1ff5557415a6e</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>// This script needs to set answer to 'yes' or 'no' to indicate the state of the activity.&#13;
//&#13;
// For example,&#13;
//&#13;
//   answer = ifScript();&#13;
//&#13;
//   function ifScript() {&#13;
	//      if (condition is true) {&#13;
		//         return 'yes';&#13;
		//      }&#13;
		//      return 'no';&#13;
		//   }&#13;
		&#13;
		answer = ifScript();&#13;
		&#13;
		function ifScript() {&#13;
			var result =  {};&#13;
				if(gs.nil(workflow.scratchpad.change_result))&#13;
					return 'error';&#13;
				result = workflow.scratchpad.change_result;&#13;
				// Log change wf response in cloud trail&#13;
				//	Apply Policy Rule Action&#13;
				createCloudTrail('Apply Policy Rule Action', '2', true, 'Change Approval result: ' + result.changeStatus, new global.JSON().encode(result));&#13;
				if(result.error)&#13;
					return 'error';&#13;
				workflow.scratchpad.changeId = result.changeId + '';&#13;
				if(result.isChangeApprovalRequired) {&#13;
					var changeStatus = result.changeStatus;&#13;
					if(changeStatus == 'approved')&#13;
						return 'yes';&#13;
					else if(changeStatus == 'cancelled')&#13;
						return 'cancelled';&#13;
					else&#13;
						return 'no';&#13;
				}&#13;
				return 'yes';&#13;
			}&#13;
			&#13;
			function createCloudTrail(step, messageType, milestone, messageSummary, messageDetails) {&#13;
				var catalogItemId = '' + current.cat_item;&#13;
				var requestItemId = '' + current.sys_id;&#13;
				var orderId ='';&#13;
				var contextKey = '';&#13;
				var stackId = '';&#13;
				if(workflow.scratchpad.resourceType == 'stack'){&#13;
					stackId = workflow.scratchpad.resource_id;&#13;
				}else{&#13;
					var gr = new GlideRecord('sn_cmp_stack_item');&#13;
					if(gr.get('ci_instance_id', workflow.scratchpad.resource_id)){&#13;
						stackId = gr.stack + '';&#13;
					}&#13;
				}&#13;
				var invocationTemplateId = '' + workflow.scratchpad.invocationTemplateId;&#13;
				var targetInstanceId = '' + workflow.scratchpad.resource_id;&#13;
				var userId = '' + current.request.requested_for;&#13;
				var groupId = '';&#13;
				var trailId = new AddCloudTrail().createTrailRecord(catalogItemId, requestItemId, orderId, contextKey, stackId, invocationTemplateId, targetInstanceId, messageType, milestone, messageDetails, messageSummary, step, userId, groupId);&#13;
			}</value>
        <variable display_value="">c35e50810a0a0ba96248a709b450fc32</variable>
    </sys_variable_value>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="Is change approved?">0c4e1b9c67fd130005d1ff5557415a6d</activity>
        <condition>activity.result == 'cancelled' &amp;&amp; activity.state != 'faulted'</condition>
        <condition_default/>
        <condition_type>standard</condition_type>
        <else_flag>false</else_flag>
        <error>false</error>
        <event>false</event>
        <event_name/>
        <is_positive>false</is_positive>
        <name>cancelled</name>
        <order>202</order>
        <short_description/>
        <skip_during_generate>false</skip_during_generate>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>804e1b9c67fd130005d1ff5557415a6f</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
    </wf_condition>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="Is change approved?">0c4e1b9c67fd130005d1ff5557415a6d</activity>
        <condition>activity.state == 'faulted'</condition>
        <condition_default/>
        <condition_type>else_flag</condition_type>
        <else_flag>true</else_flag>
        <error>false</error>
        <event>false</event>
        <event_name/>
        <is_positive>false</is_positive>
        <name>Error</name>
        <order>201</order>
        <short_description/>
        <skip_during_generate>false</skip_during_generate>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>044e1b9c67fd130005d1ff5557415a6f</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
    </wf_condition>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="Is change approved?">0c4e1b9c67fd130005d1ff5557415a6d</activity>
        <condition>activity.result == 'no' &amp;&amp; activity.state != 'faulted'</condition>
        <condition_default display_value="No">c1eff6430a0a0b59000f955abe842c94</condition_default>
        <condition_type>standard</condition_type>
        <else_flag>false</else_flag>
        <error>false</error>
        <event>false</event>
        <event_name/>
        <is_positive>false</is_positive>
        <name>No</name>
        <order>200</order>
        <short_description/>
        <skip_during_generate>true</skip_during_generate>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>844e1b9c67fd130005d1ff5557415a6f</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
    </wf_condition>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="Is change approved?">0c4e1b9c67fd130005d1ff5557415a6d</activity>
        <condition>activity.result == 'yes' &amp;&amp; activity.state != 'faulted'</condition>
        <condition_default display_value="Yes">c1ef63200a0a0b59005ef89bae78feb7</condition_default>
        <condition_type>standard</condition_type>
        <else_flag>false</else_flag>
        <error>false</error>
        <event>false</event>
        <event_name/>
        <is_positive>true</is_positive>
        <name>Yes</name>
        <order>100</order>
        <short_description/>
        <skip_during_generate>false</skip_during_generate>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>004e1b9c67fd130005d1ff5557415a6f</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
    </wf_condition>
    <wf_activity action="INSERT_OR_UPDATE">
        <activity_definition display_value="Run Script">db8c65aec0a8016501d00259bc7203a4</activity_definition>
        <activity_definition_updated>false</activity_definition_updated>
        <databus_lookup_id>6</databus_lookup_id>
        <height/>
        <input>{}</input>
        <is_parent>false</is_parent>
        <name>Is operation done?</name>
        <new_activity_definition/>
        <notes/>
        <out_of_date>false</out_of_date>
        <parent/>
        <pinned>false</pinned>
        <pinned_version/>
        <stage/>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>844e1b9c67fd130005d1ff5557415a67</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <timeout>1970-01-01 00:00:00</timeout>
        <vars/>
        <width/>
        <workflow_version display_value="Cloud Resource Operation Request">044e979c67fd130005d1ff5557415a94</workflow_version>
        <x>892</x>
        <y>177</y>
    </wf_activity>
    <sys_variable_value action="delete_multiple" query="document_key=844e1b9c67fd130005d1ff5557415a67"/>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>844e1b9c67fd130005d1ff5557415a67</document_key>
        <order>1</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>084e1b9c67fd130005d1ff5557415a67</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>var gr = new GlideRecord('sn_cmp_order');&#13;
workflow.scratchpad.error = '';&#13;
if (!gr.get(workflow.scratchpad.orderId)) {&#13;
	workflow.scratchpad.error = 'Cannot find order: '&#13;
	+ workflow.scratchpad.orderId;&#13;
	activity.result = 'failure';&#13;
} else {&#13;
	if (gr.status == '7') { // Completed&#13;
		activity.result = 'success';&#13;
		createCloudTrail('Complete Cloud Orchestration', '2', true, 'Cloud Resource Operation Success', '');&#13;
	} else if (gr.status == '8') { // Error&#13;
		activity.result = 'failure';&#13;
		createCloudTrail('Complete Cloud Orchestration', '4', true, 'Cloud Resource Operation Failed', '');&#13;
	} else { // not done yet&#13;
		activity.result = 'continue';&#13;
	}&#13;
}&#13;
&#13;
function createCloudTrail(step, messageType, milestone, messageSummary, messageDetails) {&#13;
	var catalogItemId = '' + current.cat_item;&#13;
	var requestItemId = '' + current.sys_id;&#13;
	var orderId ='';&#13;
	var contextKey = '';&#13;
	var stackId = '';&#13;
	if(workflow.scratchpad.resourceType == 'stack'){&#13;
		stackId = workflow.scratchpad.resource_id;&#13;
	}else{&#13;
		var gr = new GlideRecord('sn_cmp_stack_item');&#13;
		if(gr.get('ci_instance_id', workflow.scratchpad.resource_id)){&#13;
			stackId = gr.stack + '';&#13;
		}&#13;
	}&#13;
	var invocationTemplateId = '' + workflow.scratchpad.invocationTemplateId;&#13;
	var targetInstanceId = '' + workflow.scratchpad.resource_id;&#13;
	var userId = '' + current.request.requested_for;&#13;
	var groupId = '';&#13;
	var trailId = new AddCloudTrail().createTrailRecord(catalogItemId, requestItemId, orderId, contextKey, stackId, invocationTemplateId, targetInstanceId, messageType, milestone, messageDetails, messageSummary, step, userId, groupId);&#13;
}</value>
        <variable display_value="">c35ddef20a0a0ba96248a7090eccd518</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>844e1b9c67fd130005d1ff5557415a67</document_key>
        <order>1</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>084e1b9c67fd130005d1ff5557415a67</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>var gr = new GlideRecord('sn_cmp_order');&#13;
workflow.scratchpad.error = '';&#13;
if (!gr.get(workflow.scratchpad.orderId)) {&#13;
	workflow.scratchpad.error = 'Cannot find order: '&#13;
	+ workflow.scratchpad.orderId;&#13;
	activity.result = 'failure';&#13;
} else {&#13;
	if (gr.status == '7') { // Completed&#13;
		activity.result = 'success';&#13;
		createCloudTrail('Complete Cloud Orchestration', '2', true, 'Cloud Resource Operation Success', '');&#13;
	} else if (gr.status == '8') { // Error&#13;
		activity.result = 'failure';&#13;
		createCloudTrail('Complete Cloud Orchestration', '4', true, 'Cloud Resource Operation Failed', '');&#13;
	} else { // not done yet&#13;
		activity.result = 'continue';&#13;
	}&#13;
}&#13;
&#13;
function createCloudTrail(step, messageType, milestone, messageSummary, messageDetails) {&#13;
	var catalogItemId = '' + current.cat_item;&#13;
	var requestItemId = '' + current.sys_id;&#13;
	var orderId ='';&#13;
	var contextKey = '';&#13;
	var stackId = '';&#13;
	if(workflow.scratchpad.resourceType == 'stack'){&#13;
		stackId = workflow.scratchpad.resource_id;&#13;
	}else{&#13;
		var gr = new GlideRecord('sn_cmp_stack_item');&#13;
		if(gr.get('ci_instance_id', workflow.scratchpad.resource_id)){&#13;
			stackId = gr.stack + '';&#13;
		}&#13;
	}&#13;
	var invocationTemplateId = '' + workflow.scratchpad.invocationTemplateId;&#13;
	var targetInstanceId = '' + workflow.scratchpad.resource_id;&#13;
	var userId = '' + current.request.requested_for;&#13;
	var groupId = '';&#13;
	var trailId = new AddCloudTrail().createTrailRecord(catalogItemId, requestItemId, orderId, contextKey, stackId, invocationTemplateId, targetInstanceId, messageType, milestone, messageDetails, messageSummary, step, userId, groupId);&#13;
}</value>
        <variable display_value="">c35ddef20a0a0ba96248a7090eccd518</variable>
    </sys_variable_value>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="Is operation done?">844e1b9c67fd130005d1ff5557415a67</activity>
        <condition>activity.result=='failure';</condition>
        <condition_default/>
        <condition_type>standard</condition_type>
        <else_flag>false</else_flag>
        <error>false</error>
        <event>false</event>
        <event_name/>
        <is_positive>false</is_positive>
        <name>failure</name>
        <order>2</order>
        <short_description/>
        <skip_during_generate>false</skip_during_generate>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>004e1b9c67fd130005d1ff5557415a68</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
    </wf_condition>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="Is operation done?">844e1b9c67fd130005d1ff5557415a67</activity>
        <condition/>
        <condition_default/>
        <condition_type>else_flag</condition_type>
        <else_flag>true</else_flag>
        <error>false</error>
        <event>false</event>
        <event_name/>
        <is_positive>false</is_positive>
        <name>retry</name>
        <order>3</order>
        <short_description/>
        <skip_during_generate>false</skip_during_generate>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>804e1b9c67fd130005d1ff5557415a68</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
    </wf_condition>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="Is operation done?">844e1b9c67fd130005d1ff5557415a67</activity>
        <condition>activity.result=='success';</condition>
        <condition_default/>
        <condition_type>standard</condition_type>
        <else_flag>false</else_flag>
        <error>false</error>
        <event>false</event>
        <event_name/>
        <is_positive>false</is_positive>
        <name>success</name>
        <order>1</order>
        <short_description/>
        <skip_during_generate>false</skip_during_generate>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>044e1b9c67fd130005d1ff5557415a68</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
    </wf_condition>
    <wf_activity action="INSERT_OR_UPDATE">
        <activity_definition display_value="Run Script">db8c65aec0a8016501d00259bc7203a4</activity_definition>
        <activity_definition_updated>false</activity_definition_updated>
        <databus_lookup_id>8</databus_lookup_id>
        <height/>
        <input>{}</input>
        <is_parent>false</is_parent>
        <name>Operation failed</name>
        <new_activity_definition/>
        <notes/>
        <out_of_date>false</out_of_date>
        <parent/>
        <pinned>false</pinned>
        <pinned_version/>
        <stage/>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>c84e979c67fd130005d1ff5557415a9b</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <timeout>1970-01-01 00:00:00</timeout>
        <vars/>
        <width/>
        <workflow_version display_value="Cloud Resource Operation Request">044e979c67fd130005d1ff5557415a94</workflow_version>
        <x>490</x>
        <y>687</y>
    </wf_activity>
    <sys_variable_value action="delete_multiple" query="document_key=c84e979c67fd130005d1ff5557415a9b"/>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>c84e979c67fd130005d1ff5557415a9b</document_key>
        <order>1</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>c84e1b9c67fd130005d1ff5557415a5b</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>var changeGr = new GlideRecord('change_request');&#13;
if(!gs.nil(workflow.scratchpad.changeId) &amp;&amp; changeGr.get(workflow.scratchpad.changeId + '')) {&#13;
	var changeRequest = new global.ChangeRequest(changeGr);&#13;
	//	changeRequest.closeUnsuccessful();&#13;
	changeRequest.setClose("unsuccessful","Operation failed.");&#13;
	changeRequest.update();&#13;
}&#13;
&#13;
&#13;
var grR = new GlideRecord('sc_request'); // close the request&#13;
if(grR.get(current.request + '')) {&#13;
	grR.setValue('request_state', 'closed_incomplete');&#13;
	grR.setValue('stage', 'closed_incomplete');&#13;
	grR.update();&#13;
}&#13;
&#13;
createCloudTrail('Complete Cloud Orchestration', '4', true, 'Cloud Resource Operation Failed', '');&#13;
workflow.scratchpad.status='failed';&#13;
&#13;
function createCloudTrail(step, messageType, milestone, messageSummary, messageDetails) {&#13;
	var catalogItemId = '' + current.cat_item;&#13;
	var requestItemId = '' + current.sys_id;&#13;
	var orderId ='';&#13;
	var contextKey = '';&#13;
	var stackId = '';&#13;
	if(workflow.scratchpad.resourceType == 'stack'){&#13;
		stackId = workflow.scratchpad.resource_id;&#13;
	}else{&#13;
		var gr = new GlideRecord('sn_cmp_stack_item');&#13;
		if(gr.get('ci_instance_id', workflow.scratchpad.resource_id)){&#13;
			stackId = gr.stack + '';&#13;
		}&#13;
	}&#13;
	var invocationTemplateId = '' + workflow.scratchpad.invocationTemplateId;&#13;
	var targetInstanceId = '' + workflow.scratchpad.resource_id;&#13;
	var userId = '' + current.request.requested_for;&#13;
	var groupId = '';&#13;
	var trailId = new AddCloudTrail().createTrailRecord(catalogItemId, requestItemId, orderId, contextKey, stackId, invocationTemplateId, targetInstanceId, messageType, milestone, messageDetails, messageSummary, step, userId, groupId);&#13;
}</value>
        <variable display_value="">c35ddef20a0a0ba96248a7090eccd518</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>c84e979c67fd130005d1ff5557415a9b</document_key>
        <order>1</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>c84e1b9c67fd130005d1ff5557415a5b</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>var changeGr = new GlideRecord('change_request');&#13;
if(!gs.nil(workflow.scratchpad.changeId) &amp;&amp; changeGr.get(workflow.scratchpad.changeId + '')) {&#13;
	var changeRequest = new global.ChangeRequest(changeGr);&#13;
	//	changeRequest.closeUnsuccessful();&#13;
	changeRequest.setClose("unsuccessful","Operation failed.");&#13;
	changeRequest.update();&#13;
}&#13;
&#13;
&#13;
var grR = new GlideRecord('sc_request'); // close the request&#13;
if(grR.get(current.request + '')) {&#13;
	grR.setValue('request_state', 'closed_incomplete');&#13;
	grR.setValue('stage', 'closed_incomplete');&#13;
	grR.update();&#13;
}&#13;
&#13;
createCloudTrail('Complete Cloud Orchestration', '4', true, 'Cloud Resource Operation Failed', '');&#13;
workflow.scratchpad.status='failed';&#13;
&#13;
function createCloudTrail(step, messageType, milestone, messageSummary, messageDetails) {&#13;
	var catalogItemId = '' + current.cat_item;&#13;
	var requestItemId = '' + current.sys_id;&#13;
	var orderId ='';&#13;
	var contextKey = '';&#13;
	var stackId = '';&#13;
	if(workflow.scratchpad.resourceType == 'stack'){&#13;
		stackId = workflow.scratchpad.resource_id;&#13;
	}else{&#13;
		var gr = new GlideRecord('sn_cmp_stack_item');&#13;
		if(gr.get('ci_instance_id', workflow.scratchpad.resource_id)){&#13;
			stackId = gr.stack + '';&#13;
		}&#13;
	}&#13;
	var invocationTemplateId = '' + workflow.scratchpad.invocationTemplateId;&#13;
	var targetInstanceId = '' + workflow.scratchpad.resource_id;&#13;
	var userId = '' + current.request.requested_for;&#13;
	var groupId = '';&#13;
	var trailId = new AddCloudTrail().createTrailRecord(catalogItemId, requestItemId, orderId, contextKey, stackId, invocationTemplateId, targetInstanceId, messageType, milestone, messageDetails, messageSummary, step, userId, groupId);&#13;
}</value>
        <variable display_value="">c35ddef20a0a0ba96248a7090eccd518</variable>
    </sys_variable_value>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="Operation failed">c84e979c67fd130005d1ff5557415a9b</activity>
        <condition>true</condition>
        <condition_default/>
        <condition_type>standard</condition_type>
        <else_flag>false</else_flag>
        <error>false</error>
        <event>false</event>
        <event_name/>
        <is_positive>false</is_positive>
        <name>Error</name>
        <order>0</order>
        <short_description/>
        <skip_during_generate>false</skip_during_generate>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>444e1b9c67fd130005d1ff5557415a5c</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
    </wf_condition>
    <wf_activity action="INSERT_OR_UPDATE">
        <activity_definition display_value="Run Workflow">a1e18d75c33101008de24a3c5bba8fe4</activity_definition>
        <activity_definition_updated>false</activity_definition_updated>
        <databus_lookup_id>18</databus_lookup_id>
        <height/>
        <input>{}</input>
        <is_parent>false</is_parent>
        <name>Run CatItemRequestEnd WF</name>
        <new_activity_definition/>
        <notes/>
        <out_of_date>false</out_of_date>
        <parent/>
        <pinned>false</pinned>
        <pinned_version/>
        <stage/>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>c04e1b9c67fd130005d1ff5557415a6c</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <timeout>1970-01-01 00:00:00</timeout>
        <vars/>
        <width/>
        <workflow_version display_value="Cloud Resource Operation Request">044e979c67fd130005d1ff5557415a94</workflow_version>
        <x>1229</x>
        <y>507</y>
    </wf_activity>
    <sys_variable_value action="delete_multiple" query="document_key=c04e1b9c67fd130005d1ff5557415a6c"/>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>c04e1b9c67fd130005d1ff5557415a6c</document_key>
        <order>100</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>084e1b9c67fd130005d1ff5557415a6c</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>1</value>
        <variable display_value="">540d5b67c33101008de24a3c5bba8faa</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>c04e1b9c67fd130005d1ff5557415a6c</document_key>
        <order>50</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>444e1b9c67fd130005d1ff5557415a6c</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>workflow.scratchpad.postProcessResult</value>
        <variable display_value="">d64cbba3c33101008de24a3c5bba8f76</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>c04e1b9c67fd130005d1ff5557415a6c</document_key>
        <order>200</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>c84e1b9c67fd130005d1ff5557415a6c</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>// Set answer to the following value:&#13;
// answer = {};&#13;
// answer.workflow = 'My Sub-flow';&#13;
// answer.inputs = {};&#13;
// answer.inputs.u_my_input = 'Value for this input';&#13;
// answer.inputs.u_another_input = 'another input value';&#13;
answer = {};&#13;
answer.workflow = workflow.scratchpad.postWF;&#13;
answer.inputs = {};&#13;
answer.inputs.u_payload = new global.JSON().encode(workflow.scratchpad.payload);&#13;
// set any inputs to your sub-flow here&#13;
</value>
        <variable display_value="">d14d5f67c33101008de24a3c5bba8f3f</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>c04e1b9c67fd130005d1ff5557415a6c</document_key>
        <order>50</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>444e1b9c67fd130005d1ff5557415a6c</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>workflow.scratchpad.postProcessResult</value>
        <variable display_value="">d64cbba3c33101008de24a3c5bba8f76</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>c04e1b9c67fd130005d1ff5557415a6c</document_key>
        <order>100</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>084e1b9c67fd130005d1ff5557415a6c</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>1</value>
        <variable display_value="">540d5b67c33101008de24a3c5bba8faa</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>c04e1b9c67fd130005d1ff5557415a6c</document_key>
        <order>200</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>c84e1b9c67fd130005d1ff5557415a6c</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>// Set answer to the following value:&#13;
// answer = {};&#13;
// answer.workflow = 'My Sub-flow';&#13;
// answer.inputs = {};&#13;
// answer.inputs.u_my_input = 'Value for this input';&#13;
// answer.inputs.u_another_input = 'another input value';&#13;
answer = {};&#13;
answer.workflow = workflow.scratchpad.postWF;&#13;
answer.inputs = {};&#13;
answer.inputs.u_payload = new global.JSON().encode(workflow.scratchpad.payload);&#13;
// set any inputs to your sub-flow here&#13;
</value>
        <variable display_value="">d14d5f67c33101008de24a3c5bba8f3f</variable>
    </sys_variable_value>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="Run CatItemRequestEnd WF">c04e1b9c67fd130005d1ff5557415a6c</activity>
        <condition>activity.result != 'success'</condition>
        <condition_default display_value="Failure">b068435bc33101008de24a3c5bba8f49</condition_default>
        <condition_type>else_flag</condition_type>
        <else_flag>true</else_flag>
        <error>false</error>
        <event>false</event>
        <event_name/>
        <is_positive>false</is_positive>
        <name>failure</name>
        <order>100</order>
        <short_description/>
        <skip_during_generate>false</skip_during_generate>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>c04e1b9c67fd130005d1ff5557415a6d</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
    </wf_condition>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="Run CatItemRequestEnd WF">c04e1b9c67fd130005d1ff5557415a6c</activity>
        <condition>workflow.scratchpad.postProcessResult == 'success'</condition>
        <condition_default display_value="Success">a778871bc33101008de24a3c5bba8fc5</condition_default>
        <condition_type>standard</condition_type>
        <else_flag>false</else_flag>
        <error>false</error>
        <event>false</event>
        <event_name/>
        <is_positive>false</is_positive>
        <name>Success</name>
        <order>50</order>
        <short_description/>
        <skip_during_generate>false</skip_during_generate>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>444e1b9c67fd130005d1ff5557415a6d</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
    </wf_condition>
    <wf_activity action="INSERT_OR_UPDATE">
        <activity_definition display_value="Run Workflow">a1e18d75c33101008de24a3c5bba8fe4</activity_definition>
        <activity_definition_updated>false</activity_definition_updated>
        <databus_lookup_id>15</databus_lookup_id>
        <height/>
        <input>{}</input>
        <is_parent>false</is_parent>
        <name>Run CatItemRequestStart WF</name>
        <new_activity_definition/>
        <notes/>
        <out_of_date>false</out_of_date>
        <parent/>
        <pinned>false</pinned>
        <pinned_version/>
        <stage/>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>0c4e1b9c67fd130005d1ff5557415a5c</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <timeout>1970-01-01 00:00:00</timeout>
        <vars/>
        <width/>
        <workflow_version display_value="Cloud Resource Operation Request">044e979c67fd130005d1ff5557415a94</workflow_version>
        <x>411</x>
        <y>34</y>
    </wf_activity>
    <sys_variable_value action="delete_multiple" query="document_key=0c4e1b9c67fd130005d1ff5557415a5c"/>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>0c4e1b9c67fd130005d1ff5557415a5c</document_key>
        <order>50</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>004e1b9c67fd130005d1ff5557415a5d</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>workflow.scratchpad.preProcessResult</value>
        <variable display_value="">d64cbba3c33101008de24a3c5bba8f76</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>0c4e1b9c67fd130005d1ff5557415a5c</document_key>
        <order>200</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>844e1b9c67fd130005d1ff5557415a5d</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>// Set answer to the following value:&#13;
// answer = {};&#13;
// answer.workflow = 'My Sub-flow';&#13;
// answer.inputs = {};&#13;
// answer.inputs.u_my_input = 'Value for this input';&#13;
// answer.inputs.u_another_input = 'another input value';&#13;
answer = {};&#13;
answer.workflow = workflow.scratchpad.preWF;&#13;
answer.inputs = {};&#13;
answer.inputs.u_payload = new global.JSON().encode(workflow.scratchpad.payload);&#13;
// set any inputs to your sub-flow here&#13;
</value>
        <variable display_value="">d14d5f67c33101008de24a3c5bba8f3f</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>0c4e1b9c67fd130005d1ff5557415a5c</document_key>
        <order>100</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>c04e1b9c67fd130005d1ff5557415a5d</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>1</value>
        <variable display_value="">540d5b67c33101008de24a3c5bba8faa</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>0c4e1b9c67fd130005d1ff5557415a5c</document_key>
        <order>50</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>004e1b9c67fd130005d1ff5557415a5d</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>workflow.scratchpad.preProcessResult</value>
        <variable display_value="">d64cbba3c33101008de24a3c5bba8f76</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>0c4e1b9c67fd130005d1ff5557415a5c</document_key>
        <order>100</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>c04e1b9c67fd130005d1ff5557415a5d</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>1</value>
        <variable display_value="">540d5b67c33101008de24a3c5bba8faa</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>0c4e1b9c67fd130005d1ff5557415a5c</document_key>
        <order>200</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>844e1b9c67fd130005d1ff5557415a5d</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>// Set answer to the following value:&#13;
// answer = {};&#13;
// answer.workflow = 'My Sub-flow';&#13;
// answer.inputs = {};&#13;
// answer.inputs.u_my_input = 'Value for this input';&#13;
// answer.inputs.u_another_input = 'another input value';&#13;
answer = {};&#13;
answer.workflow = workflow.scratchpad.preWF;&#13;
answer.inputs = {};&#13;
answer.inputs.u_payload = new global.JSON().encode(workflow.scratchpad.payload);&#13;
// set any inputs to your sub-flow here&#13;
</value>
        <variable display_value="">d14d5f67c33101008de24a3c5bba8f3f</variable>
    </sys_variable_value>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="Run CatItemRequestStart WF">0c4e1b9c67fd130005d1ff5557415a5c</activity>
        <condition>activity.result != 'success'</condition>
        <condition_default display_value="Failure">b068435bc33101008de24a3c5bba8f49</condition_default>
        <condition_type>standard</condition_type>
        <else_flag>false</else_flag>
        <error>false</error>
        <event>false</event>
        <event_name/>
        <is_positive>false</is_positive>
        <name>Failure</name>
        <order>100</order>
        <short_description/>
        <skip_during_generate>false</skip_during_generate>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>804e1b9c67fd130005d1ff5557415a5e</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
    </wf_condition>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="Run CatItemRequestStart WF">0c4e1b9c67fd130005d1ff5557415a5c</activity>
        <condition>workflow.scratchpad.preProcessResult == 'success'</condition>
        <condition_default display_value="Success">a778871bc33101008de24a3c5bba8fc5</condition_default>
        <condition_type>standard</condition_type>
        <else_flag>false</else_flag>
        <error>false</error>
        <event>false</event>
        <event_name/>
        <is_positive>false</is_positive>
        <name>Success</name>
        <order>50</order>
        <short_description/>
        <skip_during_generate>false</skip_during_generate>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>004e1b9c67fd130005d1ff5557415a5e</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
    </wf_condition>
    <wf_activity action="INSERT_OR_UPDATE">
        <activity_definition display_value="Run Workflow">a1e18d75c33101008de24a3c5bba8fe4</activity_definition>
        <activity_definition_updated>false</activity_definition_updated>
        <databus_lookup_id>9</databus_lookup_id>
        <height/>
        <input>{}</input>
        <is_parent>false</is_parent>
        <name>Run OperationApproval  WF</name>
        <new_activity_definition/>
        <notes/>
        <out_of_date>false</out_of_date>
        <parent/>
        <pinned>false</pinned>
        <pinned_version/>
        <stage display_value="Waiting for Approval">c84e979c67fd130005d1ff5557415a95</stage>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>cc4e1b9c67fd130005d1ff5557415a70</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <timeout>1970-01-01 00:00:00</timeout>
        <vars/>
        <width/>
        <workflow_version display_value="Cloud Resource Operation Request">044e979c67fd130005d1ff5557415a94</workflow_version>
        <x>188</x>
        <y>517</y>
    </wf_activity>
    <sys_variable_value action="delete_multiple" query="document_key=cc4e1b9c67fd130005d1ff5557415a70"/>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>cc4e1b9c67fd130005d1ff5557415a70</document_key>
        <order>100</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>044e1b9c67fd130005d1ff5557415a71</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>1</value>
        <variable display_value="">540d5b67c33101008de24a3c5bba8faa</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>cc4e1b9c67fd130005d1ff5557415a70</document_key>
        <order>50</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>404e1b9c67fd130005d1ff5557415a71</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>workflow.scratchpad.change_result</value>
        <variable display_value="">d64cbba3c33101008de24a3c5bba8f76</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>cc4e1b9c67fd130005d1ff5557415a70</document_key>
        <order>200</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>c44e1b9c67fd130005d1ff5557415a71</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>// Set answer to the following value:&#13;
// answer = {};&#13;
// answer.workflow = 'My Sub-flow';&#13;
// answer.inputs = {};&#13;
// answer.inputs.u_my_input = 'Value for this input';&#13;
// answer.inputs.u_another_input = 'another input value';&#13;
answer = {};&#13;
answer.workflow = workflow.scratchpad.changeWf;&#13;
answer.inputs = {};&#13;
answer.inputs.approval = new global.JSON().encode(workflow.scratchpad.approvaloutput.approval);&#13;
answer.inputs.reqid = current.sys_id + '';&#13;
// set any inputs to your sub-flow here&#13;
</value>
        <variable display_value="">d14d5f67c33101008de24a3c5bba8f3f</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>cc4e1b9c67fd130005d1ff5557415a70</document_key>
        <order>50</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>404e1b9c67fd130005d1ff5557415a71</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>workflow.scratchpad.change_result</value>
        <variable display_value="">d64cbba3c33101008de24a3c5bba8f76</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>cc4e1b9c67fd130005d1ff5557415a70</document_key>
        <order>100</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>044e1b9c67fd130005d1ff5557415a71</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>1</value>
        <variable display_value="">540d5b67c33101008de24a3c5bba8faa</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>cc4e1b9c67fd130005d1ff5557415a70</document_key>
        <order>200</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>c44e1b9c67fd130005d1ff5557415a71</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>// Set answer to the following value:&#13;
// answer = {};&#13;
// answer.workflow = 'My Sub-flow';&#13;
// answer.inputs = {};&#13;
// answer.inputs.u_my_input = 'Value for this input';&#13;
// answer.inputs.u_another_input = 'another input value';&#13;
answer = {};&#13;
answer.workflow = workflow.scratchpad.changeWf;&#13;
answer.inputs = {};&#13;
answer.inputs.approval = new global.JSON().encode(workflow.scratchpad.approvaloutput.approval);&#13;
answer.inputs.reqid = current.sys_id + '';&#13;
// set any inputs to your sub-flow here&#13;
</value>
        <variable display_value="">d14d5f67c33101008de24a3c5bba8f3f</variable>
    </sys_variable_value>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="Run OperationApproval  WF">cc4e1b9c67fd130005d1ff5557415a70</activity>
        <condition>activity.result != 'success'</condition>
        <condition_default display_value="Failure">b068435bc33101008de24a3c5bba8f49</condition_default>
        <condition_type>else_flag</condition_type>
        <else_flag>true</else_flag>
        <error>false</error>
        <event>false</event>
        <event_name/>
        <is_positive>false</is_positive>
        <name>Failure</name>
        <order>100</order>
        <short_description/>
        <skip_during_generate>false</skip_during_generate>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>004e1b9c67fd130005d1ff5557415a72</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
    </wf_condition>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="Run OperationApproval  WF">cc4e1b9c67fd130005d1ff5557415a70</activity>
        <condition>activity.result == 'success' &amp;&amp; workflow.scratchpad.change_result != null</condition>
        <condition_default display_value="Success">a778871bc33101008de24a3c5bba8fc5</condition_default>
        <condition_type>standard</condition_type>
        <else_flag>false</else_flag>
        <error>false</error>
        <event>false</event>
        <event_name/>
        <is_positive>false</is_positive>
        <name>Success</name>
        <order>50</order>
        <short_description/>
        <skip_during_generate>false</skip_during_generate>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>804e1b9c67fd130005d1ff5557415a72</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
    </wf_condition>
    <wf_activity action="INSERT_OR_UPDATE">
        <activity_definition display_value="Run Script">db8c65aec0a8016501d00259bc7203a4</activity_definition>
        <activity_definition_updated>false</activity_definition_updated>
        <databus_lookup_id>25</databus_lookup_id>
        <height/>
        <input>{}</input>
        <is_parent>false</is_parent>
        <name>Set Configuration Item</name>
        <new_activity_definition/>
        <notes/>
        <out_of_date>false</out_of_date>
        <parent/>
        <pinned>false</pinned>
        <pinned_version/>
        <stage/>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>c84e1b9c67fd130005d1ff5557415a60</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <timeout>1970-01-01 00:00:00</timeout>
        <vars/>
        <width/>
        <workflow_version display_value="Cloud Resource Operation Request">044e979c67fd130005d1ff5557415a94</workflow_version>
        <x>2</x>
        <y>159</y>
    </wf_activity>
    <sys_variable_value action="delete_multiple" query="document_key=c84e1b9c67fd130005d1ff5557415a60"/>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>c84e1b9c67fd130005d1ff5557415a60</document_key>
        <order>1</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>4c4e1b9c67fd130005d1ff5557415a60</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>// Set CI on req item&#13;
current.configuration_item = current.variables.resourceId;</value>
        <variable display_value="">c35ddef20a0a0ba96248a7090eccd518</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>c84e1b9c67fd130005d1ff5557415a60</document_key>
        <order>1</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>4c4e1b9c67fd130005d1ff5557415a60</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>// Set CI on req item&#13;
current.configuration_item = current.variables.resourceId;</value>
        <variable display_value="">c35ddef20a0a0ba96248a7090eccd518</variable>
    </sys_variable_value>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="Set Configuration Item">c84e1b9c67fd130005d1ff5557415a60</activity>
        <condition>true</condition>
        <condition_default/>
        <condition_type>standard</condition_type>
        <else_flag>false</else_flag>
        <error>false</error>
        <event>false</event>
        <event_name/>
        <is_positive>true</is_positive>
        <name>Always</name>
        <order>0</order>
        <short_description/>
        <skip_during_generate>false</skip_during_generate>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>444e1b9c67fd130005d1ff5557415a61</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
    </wf_condition>
    <wf_activity action="INSERT_OR_UPDATE">
        <activity_definition display_value="Run Script">db8c65aec0a8016501d00259bc7203a4</activity_definition>
        <activity_definition_updated>false</activity_definition_updated>
        <databus_lookup_id>3</databus_lookup_id>
        <height/>
        <input>{}</input>
        <is_parent>false</is_parent>
        <name>Submit Order</name>
        <new_activity_definition/>
        <notes/>
        <out_of_date>false</out_of_date>
        <parent/>
        <pinned>false</pinned>
        <pinned_version/>
        <stage display_value="Request In Progress">c04e979c67fd130005d1ff5557415a96</stage>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>444e1b9c67fd130005d1ff5557415a66</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <timeout>1970-01-01 00:00:00</timeout>
        <vars/>
        <width/>
        <workflow_version display_value="Cloud Resource Operation Request">044e979c67fd130005d1ff5557415a94</workflow_version>
        <x>663</x>
        <y>289</y>
    </wf_activity>
    <sys_variable_value action="delete_multiple" query="document_key=444e1b9c67fd130005d1ff5557415a66"/>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>444e1b9c67fd130005d1ff5557415a66</document_key>
        <order>1</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>c44e1b9c67fd130005d1ff5557415a66</sys_id>
        <sys_mod_count>10</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-06-06 09:04:23</sys_updated_on>
        <value>workflow.scratchpad.orderevent = current.sys_id + 'order';&#13;
workflow.scratchpad.isStack = true;&#13;
&#13;
var order = {};&#13;
	order.userId = '' + current.request.requested_for; //gs.getUserID();&#13;
	order.blueprint =  getBlueprint('' + current.variables.resourceId);//get blueprint sys id from resource&#13;
	order.requestItem = current.sys_id + '';&#13;
	order.orderFormData = {};&#13;
		if(workflow.scratchpad.isStack){&#13;
			order.entityType = "Blueprint";&#13;
			order.operationName = '' + current.variables.operationName;&#13;
			order.stack = '' + current.variables.resourceId;&#13;
		}&#13;
		else {&#13;
			order.entityType = 'Resource';&#13;
			order.resource = '' + current.variables.resourceBlock;&#13;
			order.ownerInstanceId = '' + current.variables.resourceId;&#13;
			if(!gs.nil(current.variables.resourceInterface) &amp;&amp; (current.variables.operationName +'').indexOf(".") == -1){&#13;
				order.operationName = current.variables.resourceInterface + '.' + current.variables.operationName;&#13;
			}else{&#13;
				order.operationName = '' + current.variables.operationName;&#13;
			}&#13;
			if(!gs.nil(current.variables.credential)){&#13;
				order.orderFormData.credential = '' + current.variables.credential;&#13;
			}&#13;
		}&#13;
		&#13;
		var defaultVariables = ['operationName', 'resourceBlock', 'resourceInterface', 'credential'];&#13;
		for (var variable in current.variables) {&#13;
			if(defaultVariables.indexOf(variable) == -1){&#13;
				// If variable is Not one of default variables, ie. Customer generated variable&#13;
				order.orderFormData[variable] = '' + current.variables[variable];&#13;
			}&#13;
		}&#13;
		&#13;
		workflow.scratchpad.orderJSON = order;&#13;
		&#13;
		createCloudTrail('Complete Cloud Orchestration', '1', true, 'Operation Order Service Request payload', new global.JSON().encode(order));&#13;
		&#13;
		var os= new sn_cmp_api.OrderServiceScript();&#13;
		var order = os.submitOrder(new global.JSON().encode(order));&#13;
		var orderObj = new global.JSON().decode(order);&#13;
		workflow.scratchpad.orderId = orderObj.id;&#13;
		&#13;
		createCloudTrail('Complete Cloud Orchestration', '1', true, 'Operation Order Service Response', new global.JSON().encode(orderObj));&#13;
		&#13;
		function getBlueprint(resourceId) {&#13;
			var grCI = getCIGR('cmdb_ci', resourceId);&#13;
			// if resource is a stack&#13;
			if(grCI != null) {&#13;
				var cName = grCI.getRecordClassName();&#13;
				if (cName == 'sn_cmp_stack') {&#13;
					return grCI.blueprint.name + '';&#13;
				}&#13;
				else {&#13;
					workflow.scratchpad.isStack = false;&#13;
					workflow.scratchpad.objectId = grCI.object_id;&#13;
					var grItem = new GlideRecord('sn_cmp_stack_item');&#13;
					grItem.addQuery('ci_instance_id', resourceId);&#13;
					grItem.query();&#13;
					if(grItem.next() &amp;&amp; grItem.stack != null) {&#13;
						return grItem.stack.blueprint.name + '';&#13;
					}&#13;
					&#13;
				}&#13;
				&#13;
			}&#13;
			// TODO: handle the case where the resource is a stack item.&#13;
			return '';&#13;
		}&#13;
		&#13;
		function getCIGR(base_table, sys_id) {&#13;
			// first query the base table, and bail out if we can't find it...&#13;
			var gr = new GlideRecord(base_table);&#13;
			if (!gr.get(sys_id)) {&#13;
				return null;&#13;
			}&#13;
			&#13;
			// now see what class this CI really is...&#13;
			var klass = gr.getRecordClassName();&#13;
			&#13;
			// if it's actually the base class, we're done...&#13;
			if (klass == base_table) {&#13;
				return gr;&#13;
			}&#13;
			&#13;
			// re-query, but now using the right table, and bail out if we can't find it...&#13;
			gr = new GlideRecord(klass);&#13;
			if (!gr.get(sys_id)) {&#13;
				return null;&#13;
			}&#13;
			// made it, so skedaddle with our results...&#13;
			return gr;&#13;
		}&#13;
		&#13;
		function createCloudTrail(step, messageType, milestone, messageSummary, messageDetails) {&#13;
			var catalogItemId = '' + current.cat_item;&#13;
			var requestItemId = '' + current.sys_id;&#13;
			var orderId ='';&#13;
			var contextKey = '';&#13;
			var stackId = '';&#13;
			if(workflow.scratchpad.resourceType == 'stack'){&#13;
				stackId = workflow.scratchpad.resource_id;&#13;
			}else{&#13;
				var gr = new GlideRecord('sn_cmp_stack_item');&#13;
				if(gr.get('ci_instance_id', workflow.scratchpad.resource_id)){&#13;
					stackId = gr.stack + '';&#13;
				}&#13;
			}&#13;
			var invocationTemplateId = '' + workflow.scratchpad.invocationTemplateId;&#13;
			var targetInstanceId = '' + workflow.scratchpad.resource_id;&#13;
			var userId = '' + current.request.requested_for;&#13;
			var groupId = '';&#13;
			var trailId = new AddCloudTrail().createTrailRecord(catalogItemId, requestItemId, orderId, contextKey, stackId, invocationTemplateId, targetInstanceId, messageType, milestone, messageDetails, messageSummary, step, userId, groupId);&#13;
		}</value>
        <variable display_value="">c35ddef20a0a0ba96248a7090eccd518</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>444e1b9c67fd130005d1ff5557415a66</document_key>
        <order>1</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>c44e1b9c67fd130005d1ff5557415a66</sys_id>
        <sys_mod_count>10</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-06-06 09:04:23</sys_updated_on>
        <value>workflow.scratchpad.orderevent = current.sys_id + 'order';&#13;
workflow.scratchpad.isStack = true;&#13;
&#13;
var order = {};&#13;
	order.userId = '' + current.request.requested_for; //gs.getUserID();&#13;
	order.blueprint =  getBlueprint('' + current.variables.resourceId);//get blueprint sys id from resource&#13;
	order.requestItem = current.sys_id + '';&#13;
	order.orderFormData = {};&#13;
		if(workflow.scratchpad.isStack){&#13;
			order.entityType = "Blueprint";&#13;
			order.operationName = '' + current.variables.operationName;&#13;
			order.stack = '' + current.variables.resourceId;&#13;
		}&#13;
		else {&#13;
			order.entityType = 'Resource';&#13;
			order.resource = '' + current.variables.resourceBlock;&#13;
			order.ownerInstanceId = '' + current.variables.resourceId;&#13;
			if(!gs.nil(current.variables.resourceInterface) &amp;&amp; (current.variables.operationName +'').indexOf(".") == -1){&#13;
				order.operationName = current.variables.resourceInterface + '.' + current.variables.operationName;&#13;
			}else{&#13;
				order.operationName = '' + current.variables.operationName;&#13;
			}&#13;
			if(!gs.nil(current.variables.credential)){&#13;
				order.orderFormData.credential = '' + current.variables.credential;&#13;
			}&#13;
		}&#13;
		&#13;
		var defaultVariables = ['operationName', 'resourceBlock', 'resourceInterface', 'credential'];&#13;
		for (var variable in current.variables) {&#13;
			if(defaultVariables.indexOf(variable) == -1){&#13;
				// If variable is Not one of default variables, ie. Customer generated variable&#13;
				order.orderFormData[variable] = '' + current.variables[variable];&#13;
			}&#13;
		}&#13;
		&#13;
		workflow.scratchpad.orderJSON = order;&#13;
		&#13;
		createCloudTrail('Complete Cloud Orchestration', '1', true, 'Operation Order Service Request payload', new global.JSON().encode(order));&#13;
		&#13;
		var os= new sn_cmp_api.OrderServiceScript();&#13;
		var order = os.submitOrder(new global.JSON().encode(order));&#13;
		var orderObj = new global.JSON().decode(order);&#13;
		workflow.scratchpad.orderId = orderObj.id;&#13;
		&#13;
		createCloudTrail('Complete Cloud Orchestration', '1', true, 'Operation Order Service Response', new global.JSON().encode(orderObj));&#13;
		&#13;
		function getBlueprint(resourceId) {&#13;
			var grCI = getCIGR('cmdb_ci', resourceId);&#13;
			// if resource is a stack&#13;
			if(grCI != null) {&#13;
				var cName = grCI.getRecordClassName();&#13;
				if (cName == 'sn_cmp_stack') {&#13;
					return grCI.blueprint.name + '';&#13;
				}&#13;
				else {&#13;
					workflow.scratchpad.isStack = false;&#13;
					workflow.scratchpad.objectId = grCI.object_id;&#13;
					var grItem = new GlideRecord('sn_cmp_stack_item');&#13;
					grItem.addQuery('ci_instance_id', resourceId);&#13;
					grItem.query();&#13;
					if(grItem.next() &amp;&amp; grItem.stack != null) {&#13;
						return grItem.stack.blueprint.name + '';&#13;
					}&#13;
					&#13;
				}&#13;
				&#13;
			}&#13;
			// TODO: handle the case where the resource is a stack item.&#13;
			return '';&#13;
		}&#13;
		&#13;
		function getCIGR(base_table, sys_id) {&#13;
			// first query the base table, and bail out if we can't find it...&#13;
			var gr = new GlideRecord(base_table);&#13;
			if (!gr.get(sys_id)) {&#13;
				return null;&#13;
			}&#13;
			&#13;
			// now see what class this CI really is...&#13;
			var klass = gr.getRecordClassName();&#13;
			&#13;
			// if it's actually the base class, we're done...&#13;
			if (klass == base_table) {&#13;
				return gr;&#13;
			}&#13;
			&#13;
			// re-query, but now using the right table, and bail out if we can't find it...&#13;
			gr = new GlideRecord(klass);&#13;
			if (!gr.get(sys_id)) {&#13;
				return null;&#13;
			}&#13;
			// made it, so skedaddle with our results...&#13;
			return gr;&#13;
		}&#13;
		&#13;
		function createCloudTrail(step, messageType, milestone, messageSummary, messageDetails) {&#13;
			var catalogItemId = '' + current.cat_item;&#13;
			var requestItemId = '' + current.sys_id;&#13;
			var orderId ='';&#13;
			var contextKey = '';&#13;
			var stackId = '';&#13;
			if(workflow.scratchpad.resourceType == 'stack'){&#13;
				stackId = workflow.scratchpad.resource_id;&#13;
			}else{&#13;
				var gr = new GlideRecord('sn_cmp_stack_item');&#13;
				if(gr.get('ci_instance_id', workflow.scratchpad.resource_id)){&#13;
					stackId = gr.stack + '';&#13;
				}&#13;
			}&#13;
			var invocationTemplateId = '' + workflow.scratchpad.invocationTemplateId;&#13;
			var targetInstanceId = '' + workflow.scratchpad.resource_id;&#13;
			var userId = '' + current.request.requested_for;&#13;
			var groupId = '';&#13;
			var trailId = new AddCloudTrail().createTrailRecord(catalogItemId, requestItemId, orderId, contextKey, stackId, invocationTemplateId, targetInstanceId, messageType, milestone, messageDetails, messageSummary, step, userId, groupId);&#13;
		}</value>
        <variable display_value="">c35ddef20a0a0ba96248a7090eccd518</variable>
    </sys_variable_value>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="Submit Order">444e1b9c67fd130005d1ff5557415a66</activity>
        <condition>true</condition>
        <condition_default/>
        <condition_type>standard</condition_type>
        <else_flag>false</else_flag>
        <error>false</error>
        <event>false</event>
        <event_name/>
        <is_positive>true</is_positive>
        <name>Always</name>
        <order>2</order>
        <short_description/>
        <skip_during_generate>false</skip_during_generate>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>004e1b9c67fd130005d1ff5557415a67</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
    </wf_condition>
    <wf_activity action="INSERT_OR_UPDATE">
        <activity_definition display_value="Run Script">db8c65aec0a8016501d00259bc7203a4</activity_definition>
        <activity_definition_updated>false</activity_definition_updated>
        <databus_lookup_id>7</databus_lookup_id>
        <height/>
        <input>{}</input>
        <is_parent>false</is_parent>
        <name>success</name>
        <new_activity_definition/>
        <notes/>
        <out_of_date>false</out_of_date>
        <parent/>
        <pinned>false</pinned>
        <pinned_version/>
        <stage display_value="Request Completed">484e979c67fd130005d1ff5557415a96</stage>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>884e1b9c67fd130005d1ff5557415a68</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <timeout>1970-01-01 00:00:00</timeout>
        <vars/>
        <width/>
        <workflow_version display_value="Cloud Resource Operation Request">044e979c67fd130005d1ff5557415a94</workflow_version>
        <x>1225</x>
        <y>143</y>
    </wf_activity>
    <sys_variable_value action="delete_multiple" query="document_key=884e1b9c67fd130005d1ff5557415a68"/>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>884e1b9c67fd130005d1ff5557415a68</document_key>
        <order>1</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>0c4e1b9c67fd130005d1ff5557415a68</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>var changeGr = new GlideRecord('change_request');&#13;
if(changeGr.get(workflow.scratchpad.changeId + '')) {&#13;
	var changeRequest = new global.ChangeRequest(changeGr);&#13;
	//changeRequest.closeSuccessful();&#13;
	changeRequest.setClose("successful","Operation is successful.");&#13;
	changeRequest.update();&#13;
}&#13;
current.setValue('state','3'); // Closed complete&#13;
&#13;
var grR = new GlideRecord('sc_request'); // close the request&#13;
if(grR.get(current.request + '')) {&#13;
	grR.setValue('request_state', 'closed_complete');&#13;
	grR.setValue('stage', 'closed_complete');&#13;
	grR.update();&#13;
}</value>
        <variable display_value="">c35ddef20a0a0ba96248a7090eccd518</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>884e1b9c67fd130005d1ff5557415a68</document_key>
        <order>1</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>0c4e1b9c67fd130005d1ff5557415a68</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>var changeGr = new GlideRecord('change_request');&#13;
if(changeGr.get(workflow.scratchpad.changeId + '')) {&#13;
	var changeRequest = new global.ChangeRequest(changeGr);&#13;
	//changeRequest.closeSuccessful();&#13;
	changeRequest.setClose("successful","Operation is successful.");&#13;
	changeRequest.update();&#13;
}&#13;
current.setValue('state','3'); // Closed complete&#13;
&#13;
var grR = new GlideRecord('sc_request'); // close the request&#13;
if(grR.get(current.request + '')) {&#13;
	grR.setValue('request_state', 'closed_complete');&#13;
	grR.setValue('stage', 'closed_complete');&#13;
	grR.update();&#13;
}</value>
        <variable display_value="">c35ddef20a0a0ba96248a7090eccd518</variable>
    </sys_variable_value>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="success">884e1b9c67fd130005d1ff5557415a68</activity>
        <condition>true</condition>
        <condition_default/>
        <condition_type>standard</condition_type>
        <else_flag>false</else_flag>
        <error>false</error>
        <event>false</event>
        <event_name/>
        <is_positive>true</is_positive>
        <name>Always</name>
        <order>0</order>
        <short_description/>
        <skip_during_generate>false</skip_during_generate>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>444e1b9c67fd130005d1ff5557415a69</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
    </wf_condition>
    <wf_activity action="INSERT_OR_UPDATE">
        <activity_definition display_value="Timer">3961a1da0a0a0b5c00ecd84822f70d85</activity_definition>
        <activity_definition_updated>false</activity_definition_updated>
        <databus_lookup_id>19</databus_lookup_id>
        <height/>
        <input>{}</input>
        <is_parent>false</is_parent>
        <name>wait for a sec</name>
        <new_activity_definition/>
        <notes/>
        <out_of_date>false</out_of_date>
        <parent/>
        <pinned>false</pinned>
        <pinned_version/>
        <stage display_value="Check Permissions">444e979c67fd130005d1ff5557415a96</stage>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>084e1b9c67fd130005d1ff5557415a72</sys_id>
        <sys_mod_count>1</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:36</sys_updated_on>
        <timeout>1970-01-01 00:00:00</timeout>
        <vars/>
        <width/>
        <workflow_version display_value="Cloud Resource Operation Request">044e979c67fd130005d1ff5557415a94</workflow_version>
        <x>186</x>
        <y>36</y>
    </wf_activity>
    <sys_variable_value action="delete_multiple" query="document_key=084e1b9c67fd130005d1ff5557415a72"/>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>084e1b9c67fd130005d1ff5557415a72</document_key>
        <order>1350</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>004e1b9c67fd130005d1ff5557415a73</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value/>
        <variable display_value="">4cc836da0a0a0b520083ebc07da2f47c</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>084e1b9c67fd130005d1ff5557415a72</document_key>
        <order>1320</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>084e1b9c67fd130005d1ff5557415a74</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>08fcd0830a0a0b2600079f56b1adb9ae</value>
        <variable display_value="">4cc4a4030a0a0b52007334f001376dc5</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>084e1b9c67fd130005d1ff5557415a72</document_key>
        <order>310</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>084e1b9c67fd130005d1ff5557415a81</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value/>
        <variable display_value="">21f80cd00a0a0b2101fcd5b5defc0810</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>084e1b9c67fd130005d1ff5557415a72</document_key>
        <order>1310</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>0c4e1b9c67fd130005d1ff5557415a73</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>3bf802c20a0a0b52008e2859cd8abcf2</value>
        <variable display_value="">220cd53d0a0a0b214103bdc2ec5c7ab4</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>084e1b9c67fd130005d1ff5557415a72</document_key>
        <order>1360</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>444e1b9c67fd130005d1ff5557415a74</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value/>
        <variable display_value="">292b2f0e0a0a0b215aa2dd2cbc578dc5</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>084e1b9c67fd130005d1ff5557415a72</document_key>
        <order>1360</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>444e1b9c67fd130005d1ff5557415a81</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value/>
        <variable display_value="">292c91070a0a0b212543d91ffde5014c</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>084e1b9c67fd130005d1ff5557415a72</document_key>
        <order>1310</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>484e1b9c67fd130005d1ff5557415a73</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>1970-01-01 00:00:01</value>
        <variable display_value="">c35dc0df0a0a0ba96248a7098d737925</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>084e1b9c67fd130005d1ff5557415a72</document_key>
        <order>500</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>4c4e1b9c67fd130005d1ff5557415a72</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value/>
        <variable display_value="">220dc5a40a0a0b2109fbd28b8c4b6213</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>084e1b9c67fd130005d1ff5557415a72</document_key>
        <order>1360</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>804e1b9c67fd130005d1ff5557415a74</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value/>
        <variable display_value="">292bd15e0a0a0b215a040c701033e3c5</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>084e1b9c67fd130005d1ff5557415a72</document_key>
        <order>1320</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>804e1b9c67fd130005d1ff5557415a81</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value/>
        <variable display_value="">4cc6788c0a0a0b5200e6743c94001b16</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>084e1b9c67fd130005d1ff5557415a72</document_key>
        <order>3000</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>844e1b9c67fd130005d1ff5557415a73</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>// Set 'answer' to the number of seconds this timer should wait&#13;
answer = 0;</value>
        <variable display_value="">293493710a0a0b2115e3e5b4fce1d12a</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>084e1b9c67fd130005d1ff5557415a72</document_key>
        <order>320</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>884e1b9c67fd130005d1ff5557415a72</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value/>
        <variable display_value="">4cba34da0a0a0b5200798c86eafe1203</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>084e1b9c67fd130005d1ff5557415a72</document_key>
        <order>350</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>c04e1b9c67fd130005d1ff5557415a73</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value/>
        <variable display_value="">4cbfe48a0a0a0b5200cf8b82cc6685f1</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>084e1b9c67fd130005d1ff5557415a72</document_key>
        <order>1350</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>c84e1b9c67fd130005d1ff5557415a81</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value/>
        <variable display_value="">4cc740fe0a0a0b520025dcf8e2ff78e7</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>084e1b9c67fd130005d1ff5557415a72</document_key>
        <order>1310</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>cc4e1b9c67fd130005d1ff5557415a73</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value/>
        <variable display_value="">21fd462c0a0a0b211c997276d7806c03</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>084e1b9c67fd130005d1ff5557415a72</document_key>
        <order>310</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>084e1b9c67fd130005d1ff5557415a81</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value/>
        <variable display_value="">21f80cd00a0a0b2101fcd5b5defc0810</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>084e1b9c67fd130005d1ff5557415a72</document_key>
        <order>320</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>884e1b9c67fd130005d1ff5557415a72</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value/>
        <variable display_value="">4cba34da0a0a0b5200798c86eafe1203</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>084e1b9c67fd130005d1ff5557415a72</document_key>
        <order>350</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>c04e1b9c67fd130005d1ff5557415a73</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value/>
        <variable display_value="">4cbfe48a0a0a0b5200cf8b82cc6685f1</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>084e1b9c67fd130005d1ff5557415a72</document_key>
        <order>500</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>4c4e1b9c67fd130005d1ff5557415a72</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value/>
        <variable display_value="">220dc5a40a0a0b2109fbd28b8c4b6213</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>084e1b9c67fd130005d1ff5557415a72</document_key>
        <order>1310</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>0c4e1b9c67fd130005d1ff5557415a73</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>3bf802c20a0a0b52008e2859cd8abcf2</value>
        <variable display_value="">220cd53d0a0a0b214103bdc2ec5c7ab4</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>084e1b9c67fd130005d1ff5557415a72</document_key>
        <order>1310</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>484e1b9c67fd130005d1ff5557415a73</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>1970-01-01 00:00:01</value>
        <variable display_value="">c35dc0df0a0a0ba96248a7098d737925</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>084e1b9c67fd130005d1ff5557415a72</document_key>
        <order>1310</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>cc4e1b9c67fd130005d1ff5557415a73</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value/>
        <variable display_value="">21fd462c0a0a0b211c997276d7806c03</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>084e1b9c67fd130005d1ff5557415a72</document_key>
        <order>1320</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>084e1b9c67fd130005d1ff5557415a74</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>08fcd0830a0a0b2600079f56b1adb9ae</value>
        <variable display_value="">4cc4a4030a0a0b52007334f001376dc5</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>084e1b9c67fd130005d1ff5557415a72</document_key>
        <order>1320</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>804e1b9c67fd130005d1ff5557415a81</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value/>
        <variable display_value="">4cc6788c0a0a0b5200e6743c94001b16</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>084e1b9c67fd130005d1ff5557415a72</document_key>
        <order>1350</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>004e1b9c67fd130005d1ff5557415a73</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value/>
        <variable display_value="">4cc836da0a0a0b520083ebc07da2f47c</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>084e1b9c67fd130005d1ff5557415a72</document_key>
        <order>1350</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>c84e1b9c67fd130005d1ff5557415a81</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value/>
        <variable display_value="">4cc740fe0a0a0b520025dcf8e2ff78e7</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>084e1b9c67fd130005d1ff5557415a72</document_key>
        <order>1360</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>444e1b9c67fd130005d1ff5557415a74</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value/>
        <variable display_value="">292b2f0e0a0a0b215aa2dd2cbc578dc5</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>084e1b9c67fd130005d1ff5557415a72</document_key>
        <order>1360</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>444e1b9c67fd130005d1ff5557415a81</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value/>
        <variable display_value="">292c91070a0a0b212543d91ffde5014c</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>084e1b9c67fd130005d1ff5557415a72</document_key>
        <order>1360</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>804e1b9c67fd130005d1ff5557415a74</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value/>
        <variable display_value="">292bd15e0a0a0b215a040c701033e3c5</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>084e1b9c67fd130005d1ff5557415a72</document_key>
        <order>3000</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>844e1b9c67fd130005d1ff5557415a73</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>// Set 'answer' to the number of seconds this timer should wait&#13;
answer = 0;</value>
        <variable display_value="">293493710a0a0b2115e3e5b4fce1d12a</variable>
    </sys_variable_value>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="wait for a sec">084e1b9c67fd130005d1ff5557415a72</activity>
        <condition>true</condition>
        <condition_default/>
        <condition_type>standard</condition_type>
        <else_flag>false</else_flag>
        <error>false</error>
        <event>false</event>
        <event_name/>
        <is_positive>true</is_positive>
        <name>Always</name>
        <order>0</order>
        <short_description/>
        <skip_during_generate>false</skip_during_generate>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>c04e1b9c67fd130005d1ff5557415a82</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
    </wf_condition>
    <wf_activity action="INSERT_OR_UPDATE">
        <activity_definition display_value="Timer">3961a1da0a0a0b5c00ecd84822f70d85</activity_definition>
        <activity_definition_updated>false</activity_definition_updated>
        <databus_lookup_id>24</databus_lookup_id>
        <height/>
        <input>{}</input>
        <is_parent>false</is_parent>
        <name>Wait for a sec</name>
        <new_activity_definition/>
        <notes/>
        <out_of_date>false</out_of_date>
        <parent/>
        <pinned>false</pinned>
        <pinned_version/>
        <stage/>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>804e979c67fd130005d1ff5557415a97</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <timeout>1970-01-01 00:00:00</timeout>
        <vars/>
        <width/>
        <workflow_version display_value="Cloud Resource Operation Request">044e979c67fd130005d1ff5557415a94</workflow_version>
        <x>898</x>
        <y>334</y>
    </wf_activity>
    <sys_variable_value action="delete_multiple" query="document_key=804e979c67fd130005d1ff5557415a97"/>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>804e979c67fd130005d1ff5557415a97</document_key>
        <order>1360</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>004e979c67fd130005d1ff5557415a9a</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value/>
        <variable display_value="">292c91070a0a0b212543d91ffde5014c</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>804e979c67fd130005d1ff5557415a97</document_key>
        <order>1360</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>044e979c67fd130005d1ff5557415a99</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value/>
        <variable display_value="">292bd15e0a0a0b215a040c701033e3c5</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>804e979c67fd130005d1ff5557415a97</document_key>
        <order>320</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>084e979c67fd130005d1ff5557415a97</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value/>
        <variable display_value="">4cba34da0a0a0b5200798c86eafe1203</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>804e979c67fd130005d1ff5557415a97</document_key>
        <order>3000</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>084e979c67fd130005d1ff5557415a98</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>// Set 'answer' to the number of seconds this timer should wait&#13;
answer = 0;</value>
        <variable display_value="">293493710a0a0b2115e3e5b4fce1d12a</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>804e979c67fd130005d1ff5557415a97</document_key>
        <order>1310</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>404e979c67fd130005d1ff5557415a99</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value/>
        <variable display_value="">21fd462c0a0a0b211c997276d7806c03</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>804e979c67fd130005d1ff5557415a97</document_key>
        <order>350</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>444e979c67fd130005d1ff5557415a98</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value/>
        <variable display_value="">4cbfe48a0a0a0b5200cf8b82cc6685f1</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>804e979c67fd130005d1ff5557415a97</document_key>
        <order>1320</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>4c4e979c67fd130005d1ff5557415a99</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value/>
        <variable display_value="">4cc6788c0a0a0b5200e6743c94001b16</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>804e979c67fd130005d1ff5557415a97</document_key>
        <order>1350</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>804e979c67fd130005d1ff5557415a98</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value/>
        <variable display_value="">4cc836da0a0a0b520083ebc07da2f47c</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>804e979c67fd130005d1ff5557415a97</document_key>
        <order>1350</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>844e979c67fd130005d1ff5557415a9a</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value/>
        <variable display_value="">4cc740fe0a0a0b520025dcf8e2ff78e7</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>804e979c67fd130005d1ff5557415a97</document_key>
        <order>1320</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>884e979c67fd130005d1ff5557415a99</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>08fcd0830a0a0b2600079f56b1adb9ae</value>
        <variable display_value="">4cc4a4030a0a0b52007334f001376dc5</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>804e979c67fd130005d1ff5557415a97</document_key>
        <order>1310</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>8c4e979c67fd130005d1ff5557415a98</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>3bf802c20a0a0b52008e2859cd8abcf2</value>
        <variable display_value="">220cd53d0a0a0b214103bdc2ec5c7ab4</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>804e979c67fd130005d1ff5557415a97</document_key>
        <order>310</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>c04e979c67fd130005d1ff5557415a9a</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value/>
        <variable display_value="">21f80cd00a0a0b2101fcd5b5defc0810</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>804e979c67fd130005d1ff5557415a97</document_key>
        <order>1360</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>c44e979c67fd130005d1ff5557415a99</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value/>
        <variable display_value="">292b2f0e0a0a0b215aa2dd2cbc578dc5</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>804e979c67fd130005d1ff5557415a97</document_key>
        <order>1310</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>c84e979c67fd130005d1ff5557415a98</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>1970-01-01 00:00:01</value>
        <variable display_value="">c35dc0df0a0a0ba96248a7098d737925</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>804e979c67fd130005d1ff5557415a97</document_key>
        <order>500</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>cc4e979c67fd130005d1ff5557415a97</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value/>
        <variable display_value="">220dc5a40a0a0b2109fbd28b8c4b6213</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>804e979c67fd130005d1ff5557415a97</document_key>
        <order>310</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>c04e979c67fd130005d1ff5557415a9a</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value/>
        <variable display_value="">21f80cd00a0a0b2101fcd5b5defc0810</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>804e979c67fd130005d1ff5557415a97</document_key>
        <order>320</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>084e979c67fd130005d1ff5557415a97</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value/>
        <variable display_value="">4cba34da0a0a0b5200798c86eafe1203</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>804e979c67fd130005d1ff5557415a97</document_key>
        <order>350</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>444e979c67fd130005d1ff5557415a98</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value/>
        <variable display_value="">4cbfe48a0a0a0b5200cf8b82cc6685f1</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>804e979c67fd130005d1ff5557415a97</document_key>
        <order>500</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>cc4e979c67fd130005d1ff5557415a97</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value/>
        <variable display_value="">220dc5a40a0a0b2109fbd28b8c4b6213</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>804e979c67fd130005d1ff5557415a97</document_key>
        <order>1310</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>404e979c67fd130005d1ff5557415a99</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value/>
        <variable display_value="">21fd462c0a0a0b211c997276d7806c03</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>804e979c67fd130005d1ff5557415a97</document_key>
        <order>1310</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>8c4e979c67fd130005d1ff5557415a98</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>3bf802c20a0a0b52008e2859cd8abcf2</value>
        <variable display_value="">220cd53d0a0a0b214103bdc2ec5c7ab4</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>804e979c67fd130005d1ff5557415a97</document_key>
        <order>1310</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>c84e979c67fd130005d1ff5557415a98</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>1970-01-01 00:00:01</value>
        <variable display_value="">c35dc0df0a0a0ba96248a7098d737925</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>804e979c67fd130005d1ff5557415a97</document_key>
        <order>1320</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>4c4e979c67fd130005d1ff5557415a99</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value/>
        <variable display_value="">4cc6788c0a0a0b5200e6743c94001b16</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>804e979c67fd130005d1ff5557415a97</document_key>
        <order>1320</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>884e979c67fd130005d1ff5557415a99</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>08fcd0830a0a0b2600079f56b1adb9ae</value>
        <variable display_value="">4cc4a4030a0a0b52007334f001376dc5</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>804e979c67fd130005d1ff5557415a97</document_key>
        <order>1350</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>804e979c67fd130005d1ff5557415a98</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value/>
        <variable display_value="">4cc836da0a0a0b520083ebc07da2f47c</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>804e979c67fd130005d1ff5557415a97</document_key>
        <order>1350</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>844e979c67fd130005d1ff5557415a9a</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value/>
        <variable display_value="">4cc740fe0a0a0b520025dcf8e2ff78e7</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>804e979c67fd130005d1ff5557415a97</document_key>
        <order>1360</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>004e979c67fd130005d1ff5557415a9a</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value/>
        <variable display_value="">292c91070a0a0b212543d91ffde5014c</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>804e979c67fd130005d1ff5557415a97</document_key>
        <order>1360</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>044e979c67fd130005d1ff5557415a99</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value/>
        <variable display_value="">292bd15e0a0a0b215a040c701033e3c5</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>804e979c67fd130005d1ff5557415a97</document_key>
        <order>1360</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>c44e979c67fd130005d1ff5557415a99</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value/>
        <variable display_value="">292b2f0e0a0a0b215aa2dd2cbc578dc5</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>804e979c67fd130005d1ff5557415a97</document_key>
        <order>3000</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>084e979c67fd130005d1ff5557415a98</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>// Set 'answer' to the number of seconds this timer should wait&#13;
answer = 0;</value>
        <variable display_value="">293493710a0a0b2115e3e5b4fce1d12a</variable>
    </sys_variable_value>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="Wait for a sec">804e979c67fd130005d1ff5557415a97</activity>
        <condition>true</condition>
        <condition_default/>
        <condition_type>standard</condition_type>
        <else_flag>false</else_flag>
        <error>false</error>
        <event>false</event>
        <event_name/>
        <is_positive>true</is_positive>
        <name>Always</name>
        <order>0</order>
        <short_description/>
        <skip_during_generate>false</skip_during_generate>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>404e979c67fd130005d1ff5557415a9b</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
    </wf_condition>
    <wf_activity action="INSERT_OR_UPDATE">
        <activity_definition display_value="Wait for WF Event">88fbebdcac146426045370ed7901e2e2</activity_definition>
        <activity_definition_updated>false</activity_definition_updated>
        <databus_lookup_id>13</databus_lookup_id>
        <height/>
        <input>{}</input>
        <is_parent>false</is_parent>
        <name>Wait for operation </name>
        <new_activity_definition/>
        <notes/>
        <out_of_date>false</out_of_date>
        <parent/>
        <pinned>false</pinned>
        <pinned_version/>
        <stage/>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>404e1b9c67fd130005d1ff5557415a65</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <timeout>1970-01-01 00:00:00</timeout>
        <vars/>
        <width/>
        <workflow_version display_value="Cloud Resource Operation Request">044e979c67fd130005d1ff5557415a94</workflow_version>
        <x>892</x>
        <y>52</y>
    </wf_activity>
    <sys_variable_value action="delete_multiple" query="document_key=404e1b9c67fd130005d1ff5557415a65"/>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>404e1b9c67fd130005d1ff5557415a65</document_key>
        <order>1</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>444e1b9c67fd130005d1ff5557415a65</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>${workflow.scratchpad.orderevent}</value>
        <variable display_value="">c35dfb0f0a0a0ba96248a70973bbf0d9</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>404e1b9c67fd130005d1ff5557415a65</document_key>
        <order>1</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>444e1b9c67fd130005d1ff5557415a65</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <value>${workflow.scratchpad.orderevent}</value>
        <variable display_value="">c35dfb0f0a0a0ba96248a70973bbf0d9</variable>
    </sys_variable_value>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="Wait for operation ">404e1b9c67fd130005d1ff5557415a65</activity>
        <condition>activity.state == 'finished'</condition>
        <condition_default display_value="Fired">8902eeb7ac14642602e00b12fc7059c0</condition_default>
        <condition_type>standard</condition_type>
        <else_flag>false</else_flag>
        <error>false</error>
        <event>false</event>
        <event_name/>
        <is_positive>false</is_positive>
        <name>Fired</name>
        <order>1</order>
        <short_description>The event we were waiting on has been fired</short_description>
        <skip_during_generate>false</skip_during_generate>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>cc4e1b9c67fd130005d1ff5557415a65</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
    </wf_condition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="cancelled">804e1b9c67fd130005d1ff5557415a6f</condition>
        <from display_value="Is change approved?">0c4e1b9c67fd130005d1ff5557415a6d</from>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>004e1b9c67fd130005d1ff5557415a87</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <to display_value="Operation failed">c84e979c67fd130005d1ff5557415a9b</to>
    </wf_transition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="Success">884e1b9c67fd130005d1ff5557415a63</condition>
        <from display_value="Apply OperationApproval Policy">4c4e1b9c67fd130005d1ff5557415a62</from>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>004e1b9c67fd130005d1ff5557415a88</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <to display_value="Run OperationApproval  WF">cc4e1b9c67fd130005d1ff5557415a70</to>
    </wf_transition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="success">044e1b9c67fd130005d1ff5557415a68</condition>
        <from display_value="Is operation done?">844e1b9c67fd130005d1ff5557415a67</from>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>044e1b9c67fd130005d1ff5557415a85</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <to display_value="success">884e1b9c67fd130005d1ff5557415a68</to>
    </wf_transition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="Error">044e1b9c67fd130005d1ff5557415a6f</condition>
        <from display_value="Is change approved?">0c4e1b9c67fd130005d1ff5557415a6d</from>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>044e1b9c67fd130005d1ff5557415a87</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <to display_value="Operation failed">c84e979c67fd130005d1ff5557415a9b</to>
    </wf_transition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="failure">004e1b9c67fd130005d1ff5557415a68</condition>
        <from display_value="Is operation done?">844e1b9c67fd130005d1ff5557415a67</from>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>084e1b9c67fd130005d1ff5557415a85</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <to display_value="Wait for a sec">804e979c67fd130005d1ff5557415a97</to>
    </wf_transition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="Skip">4c4e1b9c67fd130005d1ff5557415a6b</condition>
        <from display_value="Apply CatItemRequestEnd Policy">cc4e1b9c67fd130005d1ff5557415a6a</from>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>084e1b9c67fd130005d1ff5557415a86</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <to display_value="End">804e1b9c67fd130005d1ff5557415a64</to>
    </wf_transition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="Success">804e1b9c67fd130005d1ff5557415a72</condition>
        <from display_value="Run OperationApproval  WF">cc4e1b9c67fd130005d1ff5557415a70</from>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>084e1b9c67fd130005d1ff5557415a88</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <to display_value="Is change approved?">0c4e1b9c67fd130005d1ff5557415a6d</to>
    </wf_transition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="else">484e1b9c67fd130005d1ff5557415a70</condition>
        <from display_value="Handle error">0c4e1b9c67fd130005d1ff5557415a6f</from>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>084e1b9c67fd130005d1ff5557415a89</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <to display_value="End">804e1b9c67fd130005d1ff5557415a64</to>
    </wf_transition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="Always">444e1b9c67fd130005d1ff5557415a61</condition>
        <from display_value="Set Configuration Item">c84e1b9c67fd130005d1ff5557415a60</from>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>404e1b9c67fd130005d1ff5557415a85</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <to display_value="wait for a sec">084e1b9c67fd130005d1ff5557415a72</to>
    </wf_transition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="Success">444e1b9c67fd130005d1ff5557415a6d</condition>
        <from display_value="Run CatItemRequestEnd WF">c04e1b9c67fd130005d1ff5557415a6c</from>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>404e1b9c67fd130005d1ff5557415a86</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <to display_value="End">804e1b9c67fd130005d1ff5557415a64</to>
    </wf_transition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="approved">044e1b9c67fd130005d1ff5557415a83</condition>
        <from display_value="Change Approved">484e1b9c67fd130005d1ff5557415a82</from>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>404e1b9c67fd130005d1ff5557415a89</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <to display_value="Submit Order">444e1b9c67fd130005d1ff5557415a66</to>
    </wf_transition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="Failure">444e1b9c67fd130005d1ff5557415a60</condition>
        <from display_value="Check Permission">084e1b9c67fd130005d1ff5557415a5f</from>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>404e1b9c67fd130005d1ff5557415a8a</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <to display_value="Operation failed">c84e979c67fd130005d1ff5557415a9b</to>
    </wf_transition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="Apply pre-processing">484e1b9c67fd130005d1ff5557415a6a</condition>
        <from display_value="Apply CatItemRequestStart Policy">c84e1b9c67fd130005d1ff5557415a69</from>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>484e1b9c67fd130005d1ff5557415a84</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <to display_value="Run CatItemRequestStart WF">0c4e1b9c67fd130005d1ff5557415a5c</to>
    </wf_transition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="Success">004e1b9c67fd130005d1ff5557415a5e</condition>
        <from display_value="Run CatItemRequestStart WF">0c4e1b9c67fd130005d1ff5557415a5c</from>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>484e1b9c67fd130005d1ff5557415a87</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <to display_value="Apply OperationApproval Policy">4c4e1b9c67fd130005d1ff5557415a62</to>
    </wf_transition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="Always">c44e1b9c67fd130005d1ff5557415a62</condition>
        <from display_value="Begin">0c4e1b9c67fd130005d1ff5557415a61</from>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>4c4e1b9c67fd130005d1ff5557415a86</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <to display_value="Set Configuration Item">c84e1b9c67fd130005d1ff5557415a60</to>
    </wf_transition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="No">844e1b9c67fd130005d1ff5557415a6f</condition>
        <from display_value="Is change approved?">0c4e1b9c67fd130005d1ff5557415a6d</from>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>804e1b9c67fd130005d1ff5557415a87</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <to display_value="Change Rejected/Cancelled">084e1b9c67fd130005d1ff5557415a5e</to>
    </wf_transition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="skip">0c4e1b9c67fd130005d1ff5557415a63</condition>
        <from display_value="Apply OperationApproval Policy">4c4e1b9c67fd130005d1ff5557415a62</from>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>804e1b9c67fd130005d1ff5557415a88</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <to display_value="Change Approved">484e1b9c67fd130005d1ff5557415a82</to>
    </wf_transition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="retry">804e1b9c67fd130005d1ff5557415a68</condition>
        <from display_value="Is operation done?">844e1b9c67fd130005d1ff5557415a67</from>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>844e1b9c67fd130005d1ff5557415a85</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <to display_value="Wait for operation ">404e1b9c67fd130005d1ff5557415a65</to>
    </wf_transition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="Apply post-processing">c84e1b9c67fd130005d1ff5557415a6b</condition>
        <from display_value="Apply CatItemRequestEnd Policy">cc4e1b9c67fd130005d1ff5557415a6a</from>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>844e1b9c67fd130005d1ff5557415a86</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <to display_value="Run CatItemRequestEnd WF">c04e1b9c67fd130005d1ff5557415a6c</to>
    </wf_transition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="Yes">004e1b9c67fd130005d1ff5557415a6f</condition>
        <from display_value="Is change approved?">0c4e1b9c67fd130005d1ff5557415a6d</from>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>844e1b9c67fd130005d1ff5557415a87</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <to display_value="Change Approved">484e1b9c67fd130005d1ff5557415a82</to>
    </wf_transition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="Failure">004e1b9c67fd130005d1ff5557415a72</condition>
        <from display_value="Run OperationApproval  WF">cc4e1b9c67fd130005d1ff5557415a70</from>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>844e1b9c67fd130005d1ff5557415a88</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <to display_value="Operation failed">c84e979c67fd130005d1ff5557415a9b</to>
    </wf_transition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="Error">c44e1b9c67fd130005d1ff5557415a70</condition>
        <from display_value="Handle error">0c4e1b9c67fd130005d1ff5557415a6f</from>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>844e1b9c67fd130005d1ff5557415a89</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <to display_value="End">804e1b9c67fd130005d1ff5557415a64</to>
    </wf_transition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="abort">484e1b9c67fd130005d1ff5557415a6b</condition>
        <from display_value="Apply CatItemRequestEnd Policy">cc4e1b9c67fd130005d1ff5557415a6a</from>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>884e1b9c67fd130005d1ff5557415a86</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <to display_value="End">804e1b9c67fd130005d1ff5557415a64</to>
    </wf_transition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="Always">c04e1b9c67fd130005d1ff5557415a82</condition>
        <from display_value="wait for a sec">084e1b9c67fd130005d1ff5557415a72</from>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>8c4e1b9c67fd130005d1ff5557415a84</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <to display_value="Check Permission">084e1b9c67fd130005d1ff5557415a5f</to>
    </wf_transition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="Always">804e1b9c67fd130005d1ff5557415a5f</condition>
        <from display_value="Change Rejected/Cancelled">084e1b9c67fd130005d1ff5557415a5e</from>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>8c4e1b9c67fd130005d1ff5557415a85</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <to display_value="Operation failed">c84e979c67fd130005d1ff5557415a9b</to>
    </wf_transition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="abort">084e1b9c67fd130005d1ff5557415a63</condition>
        <from display_value="Apply OperationApproval Policy">4c4e1b9c67fd130005d1ff5557415a62</from>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>8c4e1b9c67fd130005d1ff5557415a87</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <to display_value="Operation failed">c84e979c67fd130005d1ff5557415a9b</to>
    </wf_transition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="Fired">cc4e1b9c67fd130005d1ff5557415a65</condition>
        <from display_value="Wait for operation ">404e1b9c67fd130005d1ff5557415a65</from>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>8c4e1b9c67fd130005d1ff5557415a88</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <to display_value="Is operation done?">844e1b9c67fd130005d1ff5557415a67</to>
    </wf_transition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="Error">444e1b9c67fd130005d1ff5557415a5c</condition>
        <from display_value="Operation failed">c84e979c67fd130005d1ff5557415a9b</from>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>8c4e1b9c67fd130005d1ff5557415a89</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <to display_value="Handle error">0c4e1b9c67fd130005d1ff5557415a6f</to>
    </wf_transition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="failure">c04e1b9c67fd130005d1ff5557415a6d</condition>
        <from display_value="Run CatItemRequestEnd WF">c04e1b9c67fd130005d1ff5557415a6c</from>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>c04e1b9c67fd130005d1ff5557415a86</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <to display_value="Handle error">0c4e1b9c67fd130005d1ff5557415a6f</to>
    </wf_transition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="Else">844e1b9c67fd130005d1ff5557415a83</condition>
        <from display_value="Change Approved">484e1b9c67fd130005d1ff5557415a82</from>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>c04e1b9c67fd130005d1ff5557415a89</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <to display_value="Operation failed">c84e979c67fd130005d1ff5557415a9b</to>
    </wf_transition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="Success">c04e1b9c67fd130005d1ff5557415a60</condition>
        <from display_value="Check Permission">084e1b9c67fd130005d1ff5557415a5f</from>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>c04e1b9c67fd130005d1ff5557415a8a</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <to display_value="Apply CatItemRequestStart Policy">c84e1b9c67fd130005d1ff5557415a69</to>
    </wf_transition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="abort">c44e1b9c67fd130005d1ff5557415a6a</condition>
        <from display_value="Apply CatItemRequestStart Policy">c84e1b9c67fd130005d1ff5557415a69</from>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>c44e1b9c67fd130005d1ff5557415a84</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <to display_value="Operation failed">c84e979c67fd130005d1ff5557415a9b</to>
    </wf_transition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="Skip">444e1b9c67fd130005d1ff5557415a6a</condition>
        <from display_value="Apply CatItemRequestStart Policy">c84e1b9c67fd130005d1ff5557415a69</from>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>c84e1b9c67fd130005d1ff5557415a84</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <to display_value="Apply OperationApproval Policy">4c4e1b9c67fd130005d1ff5557415a62</to>
    </wf_transition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="Always">444e1b9c67fd130005d1ff5557415a69</condition>
        <from display_value="success">884e1b9c67fd130005d1ff5557415a68</from>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>c84e1b9c67fd130005d1ff5557415a85</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <to display_value="Apply CatItemRequestEnd Policy">cc4e1b9c67fd130005d1ff5557415a6a</to>
    </wf_transition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="Failure">804e1b9c67fd130005d1ff5557415a5e</condition>
        <from display_value="Run CatItemRequestStart WF">0c4e1b9c67fd130005d1ff5557415a5c</from>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>c84e1b9c67fd130005d1ff5557415a87</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <to display_value="Operation failed">c84e979c67fd130005d1ff5557415a9b</to>
    </wf_transition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="Always">004e1b9c67fd130005d1ff5557415a67</condition>
        <from display_value="Submit Order">444e1b9c67fd130005d1ff5557415a66</from>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>c84e1b9c67fd130005d1ff5557415a88</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <to display_value="Is operation done?">844e1b9c67fd130005d1ff5557415a67</to>
    </wf_transition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="Always">404e979c67fd130005d1ff5557415a9b</condition>
        <from display_value="Wait for a sec">804e979c67fd130005d1ff5557415a97</from>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>c84e1b9c67fd130005d1ff5557415a89</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <to display_value="Operation failed">c84e979c67fd130005d1ff5557415a9b</to>
    </wf_transition>
    <wf_estimated_runtime_config action="INSERT_OR_UPDATE">
        <estimated_run_time/>
        <no_of_data_points>1</no_of_data_points>
        <percentage_threshold_ert>20</percentage_threshold_ert>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-04-27 09:04:23</sys_created_on>
        <sys_id>c44e979c67fd130005d1ff5557415a94</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-04-27 09:04:23</sys_updated_on>
        <workflow_version display_value="Cloud Resource Operation Request">044e979c67fd130005d1ff5557415a94</workflow_version>
    </wf_estimated_runtime_config>
    <wf_workflow_version action="update_multiple" query="workflow=c61355e3875032003273f4bbe3e3ec2d^sys_id!=044e979c67fd130005d1ff5557415a94">
        <published>false</published>
    </wf_workflow_version>
</record_update>
